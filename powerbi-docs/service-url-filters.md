---
title: กรองรายงานโดยใช้พารามิเตอร์สตริงของแบบสอบถามใน URL
description: กรองรายงานโดยใช้พารามิเตอร์สตริงของแบบสอบถาม URL หรือแมกระทั่งกรองบนเขตข้อมูลมากกว่าหนึ่งรายการ
author: maggiesMSFT
ms.author: maggies
manager: kfile
ms.reviewer: ''
featuredvideoid: ''
ms.service: powerbi
ms.subservice: powerbi-service
ms.topic: conceptual
ms.date: 04/24/2019
LocalizationGroup: Reports
ms.openlocfilehash: 1d1371fa63af51f50a631739e4b2eed5550dc7ee
ms.sourcegitcommit: f05ba39a0e46cb9cb43454772fbc5397089d58b4
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 07/26/2019
ms.locfileid: "68523316"
---
# <a name="filter-a-report-using-query-string-parameters-in-the-url"></a>กรองรายงานโดยใช้พารามิเตอร์สตริงของแบบสอบถามใน URL

เมื่อคุณเปิดรายงานในบริการ Power BI แต่ละหน้าของรายงานมี URL ของตัวเองไม่ซ้ำกัน เมื่อต้องกรองหน้ารายงานนั้น คุณสามารถใช้บานหน้าต่างตัวกรองบนพื้นที่รายงาน  หรือคุณสามารถเพิ่มพารามิเตอร์สตริงของคิวรีไปยัง URL เพื่อกรองรายงานไว้ล่วงหน้า บางครั้งคุณมีรายงานที่คุณต้องการแสดงให้แก่ผู้ร่วมงาน และคุณต้องการกรองไว้ล่วงหน้าสำหรับพวกเขา วิธีหนึ่งที่กรองได้ก็คือ การเริ่มต้นด้วย URL ที่เป็นค่าเริ่มต้นสำหรับรายงาน เพิ่มพารามิเตอร์ตัวกรองให้กับ URL และจากนั้น ส่ง URL ใหม่ทั้งหมดให้พวกเขาทางอีเมล

![รายงาน Power BI ในบริการ](media/service-url-filters/power-bi-report2.png)

## <a name="uses-for-query-string-parameters"></a>ใช้สำหรับพารามิเตอร์สตริงของคิวรี

สมมติว่าคุณกำลังทำงานใน Power BI Desktop และคุณต้องการสร้างรายงานที่มีลิงก์ไปยังรายงาน Power BI อื่น ๆ แต่คุณต้องการแสดงข้อมูลเพียงบางส่วนในรายงานอื่น ๆ ก่อนอื่น กรองรายงานโดยใช้พารามิเตอร์สตริงของคิวรี และบันทึก URL ถัดไป สร้างตารางใน Desktop โดยใช้ URL ของรายงานใหม่เหล่านี้  จากนั้นเผยแพร่ และแชร์รายงาน

สามารถใช้พารามิเตอร์สตริงของคิวรีในการสร้างโซลูชัน Power BI ขั้นสูงได้  ด้วยการใช้ DAX พวกเขาจะสร้างรายงานที่สร้าง URL ของรายงานที่กรองแล้วตามข้อมูลที่ลูกค้าของตนเองเลือกในรายงานปัจจุบัน เมื่อลูกค้าเลือก URL พวกเขาเห็นเฉพาะข้อมูลที่กำหนดไว้ 

## <a name="query-string-parameter-syntax-for-filtering"></a>ไวยากรณ์พารามิเตอร์สตริงของแบบสอบถามสำหรับการกรอง

ด้วยพารามิเตอร์ คุณสามารถกรองรายงานด้วยค่าอย่างน้อยหนึ่งค่าหรือมากกว่า แม้ว่าค่าเหล่านั้นประกอบด้วยเว้นวรรคหรืออักขระพิเศษ ไวยากรณ์พื้นฐานจะค่อนข้างตรงไปตรงมา เริ่มต้นด้วย URL ของรายงาน เพิ่มเครื่องหมายคำถาม และจากนั้น เพิ่มไวยากรณ์ตัวกรองของคุณ

URL?filter=***ตาราง***/***เขตข้อมูล*** eq '***ค่า***'

![URL ที่มีตัวกรอง](media/service-url-filters/power-bi-filter-urls7b.png)

* ชื่อ**ตาราง**และ**เขตข้อมูล**ต้องตรงตามตัวพิมพ์ใหญ่-เล็ก แต่**ค่า**ไม่จำเป็น
* ยังคงสามารถกรองข้อมูลของเขตข้อมูลที่ถูกซ่อนจากมุมมองรายงาน

### <a name="reports-in-apps"></a>รายงานในแอป

ถ้าคุณต้องการเพิ่มตัวกรอง URL ไปยังรายงานในแอป การจัดรูปแบบจะแตกต่างเล็กน้อย ลิงก์ไปยังรายงานในแอปจะมีพารามิเตอร์แบบสอบถาม (ctid) ที่จะถูกเพิ่มไปยัง URL แยกพารามิเตอร์แบบสอบถามที่มีเครื่องหมายและ (&) เก็บ "? filter =" และย้ายพารามิเตอร์ ctid ไปยังจุดสิ้นสุดของ URL ซึ่งนำหน้าด้วยเครื่องหมายและ (&) 

ดังเช่นตัวอย่างนี้:

app.powerbi.com/groups/me/apps/*app-id*/reports/*report-id*/ReportSection?filter=*Table*/*Field* eq '*value*&'ctid=*ctid*

### <a name="field-types"></a>ชนิดเขตข้อมูล

ชนิดเขตข้อมูลสามารถเป็นตัวเลข วันเวลาหรือสตริง และชนิดที่ใช้ต้องตรงกับชนิดที่กำหนดในชุดข้อมูล  ตัวอย่างเช่น การระบุคอลัมน์ในตารางเป็นชนิด "สตริง" จะไม่ทำงานหากคุณกำลังค้นหาค่าที่เป็นวันที่เวลาหรือตัวเลขในคอลัมน์ชุดข้อมูลที่ตั้งค่าเป็นวันที่ เช่น ตาราง/StringColumn eq 1

* **สตริง**ต้องถูกล้อมรอบด้วยเครื่องหมายอัญประกาศเดี่ยว - 'ชื่อผู้จัดการ'
* **ตัวเลข**ไม่จำเป็นต้องมีการจัดรูปแบบพิเศษ
* **วันที่และเวลา**ต้องถูกล้อมรอบด้วยเครื่องหมายอัญประกาศเดี่ยว ใน OData v3 ต้องนำหน้าด้วยคำว่า datetime แต่ไม่จำเป็นต้องใช้ datetime ใน OData v4

ถ้ายังคงสับสน ให้อ่านต่อไป เราจะอธิบายในรายละเอียด  

## <a name="filter-on-a-field"></a>ตัวกรองบนเขตข้อมูล

สมมติว่า URL ในรายงานของเราเป็นดังนี้

![URL เริ่มต้น](media/service-url-filters/power-bi-filter-urls6.png)

และจะเห็นได้ในการจัดรูปแบบการแสดงข้อมูลแผนที่ (ด้านบน) ที่เรามีร้านค้าใน North Carolina

>[!NOTE]
>ตัวอย่างนี้จะยึดตาม [ตัวอย่างการวิเคราะห์ร้านค้าปลีก](sample-datasets.md)
> 

เพื่อกรองรายงานสำหรับแสดงข้อมูลเฉพาะสำหรับร้านค้าใน "NC" (North Carolina) ให้เพิ่มข้อมูลต่อไปนี้ลงใน URL:

?filter=Store/Territory eq 'NC'

![URL ที่มีตัวกรอง](media/service-url-filters/power-bi-filter-urls7.png)

>[!NOTE]
>*NC* เป็นค่าสำหรับ North Carolina ที่จัดเก็บไว้ในเขตข้อมูล **Territory** ในตาราง **Store**
> 

รายงานของเราถูกกรองสำหรับ North Carolina แล้ว กล่าวคือ การจัดรูปแบบการแสดงข้อมูลทั้งหมดบนหน้ารายงานจะแสดงข้อมูลเฉพาะ North Carolina เท่านั้น

![รายงานที่กรองแล้วสำหรับ North Carolina](media/service-url-filters/power-bi-report4.png)

## <a name="filter-on-multiple-fields"></a>ตัวกรองบนหลายเขตข้อมูล

คุณยังสามารถกรองบนเขตข้อมูลหลายรายการได้โดยการเพิ่มพารามิเตอร์เพิ่มเติมไปยัง URL ของคุณ ลองย้อนกลับไปยังพารามิเตอร์ตัวกรองต้นฉบับของเรา

```
?filter=Store/Territory eq 'NC'
```

หากต้องการกรองบนเขตข้อมูลเพิ่มเติม ให้เพิ่ม '**and**' และเขตข้อมูลอีกเขตหนึ่งในรูปแบบเดียวกับด้านบน ต่อไปนี้เป็นตัวอย่างหนึ่ง:

```
?filter=Store/Territory eq 'NC' and Store/Chain eq 'Fashions Direct'
```

<iframe width="640" height="360" src="https://www.youtube.com/embed/0sDGKxOaC8w?showinfo=0" frameborder="0" allowfullscreen></iframe>

## <a name="operators"></a>ตัวดำเนินการ

Power BI รองรับตัวดำเนินการมากมายที่นอกเหนือจาก '**and**' ตารางด้านล่างแสดงตัวดำเนินการเหล่านั้นพร้อมกับชนิดเนื้อหาที่สนับสนุน

|ตัวดำเนินการ  | ข้อกำหนด | สตริง  | ตัวเลข | วันที่ |  ตัวอย่าง:|
|---------|---------|---------|---------|---------|---------|
|**and**     | และ |  ใช่      | ใช่ |  ใช่|  ผลิตภัณฑ์/ราคา le 200 และราคา gt 3.5 |
|**eq**     | เท่ากับ |  ใช่      | ใช่   |  ใช่       | ที่อยู่/เมือง eq 'Redmond' |
|**ne**     | ไม่เท่ากับ |   ใช่      | ใช่  | ใช่        |  ที่อยู่/เมือง ne 'ลอนดอน' |
|**ge**     |  มากกว่าหรือเท่ากับ       | ไม่ | ใช่ |ใช่ |  ผลิตภัณฑ์/ราคา ge 10
|**gt**     | มากกว่า        |ไม่ | ใช่ | ใช่  | ผลิตภัณฑ์/ราคา gt 20
|**le**     |   น้อยกว่าหรือเท่ากับ      | ไม่ | ใช่ | ใช่  | ผลิตภัณฑ์/ราคา le 100
|**lt**     |  น้อยกว่า       | ไม่ | ใช่ | ใช่ |  ผลิตภัณฑ์/ราคา lt 20
|**ใน\*\***     |  รวมถึง       | ใช่ | ใช่ |  ใช่ | นักเรียน/อายุ in (27, 29)


\*\* เมื่อใช้ **ใน** ค่าทางด้านขวาของ **in** สามารถเป็นรายการที่คั่นด้วยจุลภาคที่ถูกล้อมรอบด้วยวงเล็บ หรือเป็นนิพจน์เดี่ยวที่ส่งค่ากลับเป็นคอลเลกชัน

### <a name="numeric-data-types"></a>ชนิดข้อมูลตัวเลข

ตัวกรอง Power BI URL สามารถรวมตัวเลขในรูปแบบต่อไปนี้

|ชนิดตัวเลข  |ตัวอย่าง:  |
|---------|---------|
|**จำนวนเต็ม**     |   5      |
|**long**     |   5 L หรือ 5 l      |
|**สองตัวเลข**     |   5.5 หรือ 55e-1 หรือ 0.55e +1 หรือ 5D หรือ 5d หรือ 0.5e1D หรือ 0.5e1d หรือ 5.5D หรือ 5.5d หรือ 55e-1D หรือ 55e -1d     |
|**ทศนิยม**     |   5 M หรือ 5 m หรือ 5.5 M หรือ 5.5 m      |
|**เลขหลังจุดทศนิยมไม่จำกัด**     | 5 F หรือ 5 f หรือ 0.5e1 F หรือ 0.5e-1 d        |

### <a name="date-data-types"></a>ชนิดข้อมูลวัน

Power BI สนับสนุน OData V3 และ V4 สำหรับชนิดข้อมูล**วัน**และ **DateTimeOffset**  แสดงวันที่โดยใช้รูปแบบ EDM (2019-02-12T00:00:00) ดัง นั้นเมื่อคุณระบุวันที่เป็น ‘YYYY-MM-DD’ Power BI จะแปลเป็น ‘YYYY-MM-DDT00:00:00’

ทำไมความแตกต่างนี้จึงสำคัญ สมมติว่า คุณสร้างพารามิเตอร์สตริงของคิวรี**ตาราง/วัน gt ‘2018-08-03’**  ผลลัพธ์จะรวมวันที่ 3 สิงหาคม 2018 หรือเริ่มต้นด้วยวันที่ 4 สิงหาคม 2018 หรือไม่? เนื่องจาก Power BI แปลงผลคิวรีของคุณให้เป็น **ตาราง/วันที่ gt 2018-08-03T00:00:00** ผลลัพธ์ของคุณรวมถึงวันที่ที่มีส่วนของเวลาที่ไม่ใช่ศูนย์เนื่องจากวันที่เหล่านั้นมีค่ามากกว่า **‘2018-08-03T00:00:00’**

## <a name="special-characters-in-url-filters"></a>อักขระพิเศษในตัวกรอง URL

อักขระพิเศษและช่องว่างจำเป็นต้องจัดรูปแบบบางอย่างเพิ่มเติม เมื่อคิวรีของคุณประกอบด้วยช่องว่าง, เส้นประ หรืออักขระอื่น ๆ ที่ไม่ใช่ ASCII ให้ใส่คำหน้าอักขระพิเศษเหล่านั้นด้วย *escape code* ที่ขึ้นต้นด้วยขีดล่างและ X ( **_x**) แล้วใส่ **Unicode** 4 หลักตามด้วยขีดล่าง หาก Unicode น้อยกว่าสี่อักขระ คุณจำเป็นต้องเติมศูนย์ นี่คือบางตัวอย่าง

|ตัวระบุ  |Unicode  | การเขียนโคัดสำหรับ Power BI  |
|---------|---------|---------|
|**ชื่อตาราง**     | ช่องว่าง คือ 0x20        |  Table_x0020_Name       |
|**Column**@**Number**     |   @ คือ 0x40     |  Column_x0040_Number       |
|**[Column]**     |  [คือ 0x0058] คือ 0x0050       |  _x0058_Column_x0050_       |
|**Column+Plus**     | + คือ 0x2B        |  Column_x002B_Plus       |

Table_x0020_Name/Column_x002B_Plus eq 3![ ภาพตารางแสดงอักขระพิเศษ](media/service-url-filters/power-bi-special-characters1.png)


Table_x0020_Special /_x005B_Column_x0020_Brackets_x005D_ eq '[C]'![ ตารางแสดงอักขระพิเศษ](media/service-url-filters/power-bi-special-characters2.png)

## <a name="use-dax-to-filter-on-multiple-values"></a>ใช้ DAX เพื่อกรองค่าหลายค่า

อีกวิธีหนึ่งเพื่อกรองหลายเขตข้อมูลคือ การสร้างคอลัมน์จากการคำนวณที่รวมเขตข้อมูลสองเขตเป็นค่าเดียว จากนั้น คุณก็สามารถกรองค่านั้นได้

ตัวอย่างเช่น เรามีสองเขตข้อมูล: Territory และ Chain ใน Power BI Desktop คุณสามารถ[สร้างคอลัมน์จากการคำนวณ](desktop-tutorial-create-calculated-columns.md) (เขตข้อมูล) ที่เรียกว่า TerritoryChain ได้ โปรดจำไว้ว่า ชื่อ**เขตข้อมูล**ต้องไม่มีช่องว่าง นี่คือสูตร DAX สำหรับคอลัมน์นั้น

TerritoryChain = [Territory] & "-" & [Chain]

เผยแพร่รายงานไปยังบริการ Power BI จากนั้นใช้สตริงแบบสอบถาม URL ในการกรองเพื่อแสดงข้อมูลสำหรับร้านค้า Lindseys ใน NC เท่านั้น

    https://app.powerbi.com/groups/me/reports/8d6e300b-696f-498e-b611-41ae03366851/ReportSection3?filter=Store/TerritoryChain eq 'NC – Lindseys'

## <a name="pin-a-tile-from-a-filtered-report"></a>ปักหมุดไทล์จากรายงานที่กรองแล้ว

เมื่อคุณได้กรองรายงานโดยใช้พารามิเตอร์สตริงของแบบสอบถาม คุณสามารถปักหมุดการจัดรูปแบบการแสดงข้อมูลจากรายงานไปยังแดชบอร์ดของคุณได้  ไทล์บนแดชบอร์ดแสดงข้อมูลกรองแล้ว และการเลือกไทล์แดชบอร์ดจะเปิดรายงานที่ใช้เพื่อสร้างไทล์แดชบอร์ดนั้น  อย่างไรก็ตาม การกรองที่คุณใช้ URL จะไม่ถูกบันทึกกับรายงาน เมื่อคุณเลือกไทล์แดชบอร์ด รายงานจะเปิดขึ้นในสถานะที่ไม่ถูกกรอง  ดังนั้น ข้อมูลที่แสดงในไทล์แดชบอร์ดจะไม่ตรงกับข้อมูลที่แสดงในการแสดงภาพของรายงาน

ข้อแตกต่างนี้จะมีประโยชน์เมื่อคุณต้องการดูผลลัพธ์ที่แตกต่าง กล่าวคือ ผลลัพธ์ที่ถูกกรองบนแดชบอร์ด และผลลัพธ์ที่ยังไม่ได้กรองในรายงาน

## <a name="considerations-and-troubleshooting"></a>ข้อควรพิจารณาและการแก้ไขปัญหา

มีบางสิ่งที่ควรระวังเมื่อใช้พารามิเตอร์สตริงของแบบสอบถาม

* เมื่อใช้ตัวดำเนินการ *in* ค่าทางด้านขวาของ *in* ต้องเป็นรายการที่คั่นด้วยจุลภาคที่อยู่ในวงเล็บ    
* ในเซิร์ฟเวอร์รายงาน Power BI คุณสามารถ[ผ่านพารามิเตอร์รายงาน](https://docs.microsoft.com/sql/reporting-services/pass-a-report-parameter-within-a-url?view=sql-server-2017.md)ได้โดยการรวมพารามเตอร์เหล่านั้นใน URL รายงานได้ พารามิเตอร์ URL เหล่านี้ไม่มีคำนำหน้าเนื่องจากถูกส่งผ่านโดยตรงไปยังกลไกการประมวลผลรายงาน
* การกรองสตริงคิวรีไม่สามารถใช้ได้กับ [เผยแพร่บนเว็บ](service-publish-to-web.md)หรือ [ส่งออกเป็น PDF](consumer/end-user-pdf.md)
* [ฝังด้วยส่วนเว็บรายงานใน SharePoint Online](service-embed-report-spo.md) จะไม่รองรับตัวกรอง URL
* ชนิดข้อมูล long คือ (2^53-1) เนื่องจากข้อจำกัดของ Javascript
* ตัวกรองรายงาน URL จำกัดที่ 10 นิพจน์ (AND เชื่อมต่อ 10 ตัวกรอง)

## <a name="next-steps"></a>ขั้นตอนถัดไป

[ปักหมุดการแสดงภาพไปยังแดชบอร์ด](service-dashboard-pin-tile-from-report.md)  
[ลงทะเบียนเพื่อขอรับรุ่นทดลองใช้ฟรี](https://powerbi.microsoft.com/get-started/)

มีคำถามเพิ่มเติมหรือไม่? [ลองถามชุมชน Power BI](http://community.powerbi.com/)
