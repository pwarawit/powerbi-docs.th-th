---
title: เทคนิคการลดข้อมูลเพื่อการนำเข้าการสร้างแบบจำลอง
description: ทำความเข้าใจเทคนิคที่แตกต่างกันเพื่อช่วยลดข้อมูลที่โหลดลงในแบบจำลองการนำเข้า
author: peter-myers
manager: asaxton
ms.reviewer: asaxton
ms.service: powerbi
ms.subservice: powerbi-desktop
ms.topic: conceptual
ms.date: 08/05/2019
ms.author: v-pemyer
ms.openlocfilehash: 794ded1bc310cfcecc609f48ee4f0595693ceeb3
ms.sourcegitcommit: d9755602235ba03594c348571b9102c9bf88d732
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 08/15/2019
ms.locfileid: "69520191"
---
# <a name="data-reduction-techniques-for-import-modeling"></a>เทคนิคการลดข้อมูลเพื่อการนำเข้าการสร้างแบบจำลอง

บทความนี้มีเป้าหมายให้ตัวสร้างแบบจำลอง Power BI Desktop พัฒนาแบบจำลองการนำเข้า ซึ่งอธิบายเทคนิคที่แตกต่างกันเพื่อช่วยลดข้อมูลที่โหลดลงในแบบจำลองการนำเข้า

จะมีการโหลดแบบจำลองการนำเข้าพร้อมข้อมูลที่ถูกบีบอัดและปรับให้เหมาะสม จากนั้นจึงเก็บข้อมูลลงในดิสก์โดยกลไกที่จัดเก็บข้อมูล VertiPaq เมื่อมีการโหลดข้อมูลต้นฉบับลงในหน่วยความจำ จำเป็นต้องทำการบีบอัด 10 เท่า ดังนั้นจึงเป็นเรื่องสมเหตุสมผลที่ว่าข้อมูลต้นฉบับขนาด 10 GB สามารถบีบอัดให้มีขนาดประมาณ 1 GB ได้ นอกจากนี้ เมื่อยังอยู่ในดิสก์ การลดลง 20% เพิ่มเติมสามารถดำเนินการได้

แม้ว่าจะบรรลุผลสำเร็จจากประสิทธิภาพที่ได้จากกลไกที่จัดเก็บข้อมูล VertiPaq ถือเป็นสิ่งสำคัญที่คุณต้องพยายามลดขนาดข้อมูลที่จะทำการโหลดลงในแบบจำลองของคุณให้เหลือน้อยที่สุด ซึ่งเป็นความจริง โดยเฉพาะอย่างยิ่งสำหรับแบบจำลองขนาดใหญ่ หรือแบบจำลองที่คุณคาดว่าจะเติบโตจนมีขนาดใหญ่ขึ้นเมื่อเวลาผ่านไป เหตุผลที่กระตุ้นความสนใจสี่ประการรวมถึง:

- ขนาดของแบบจำลองขนาดใหญ่อาจไม่ได้รองรับตามความจุของคุณ ความจุที่ใช้ร่วมกันสามารถโฮสต์แบบจำลองได้สูงสุดถึง 1 GB ในขณะที่ความจุแบบพรีเมียมสามารถโฮสต์แบบจำลองได้สูงสุดถึง 13 GB สำหรับข้อมูลเพิ่มเติม โปรดอ่านบทความ [การสนับสนุนของ Power BI Premium สำหรับชุดข้อมูลขนาดใหญ่](../service-premium-large-datasets.md)
- ขนาดแบบจำลองขนาดเล็กช่วยลดการช่วงชิงทรัพยากรความจุในหน่วยความจำเฉพาะ การดำเนินการนี้จะช่วยให้สามารถโหลดรูปแบบที่พร้อมกันได้มากขึ้นสำหรับระยะเวลาที่ยาวขึ้น ซึ่งส่งผลให้อัตราการขับออกของข้อมูลลดลง สำหรับข้อมูลเพิ่มเติม อ่านหัวข้อ [วิธีการที่ความจุทำงาน](../whitepaper-powerbi-premium-deployment.md#how-capacities-function) ของเอกสารทางเทคนิค [การปรับใช้ Power BI Premium](../whitepaper-powerbi-premium-deployment.md)
- แบบจำลองขนาดเล็กทำให้เกิดการรีเฟรชข้อมูลบรรลุผลได้เร็วขึ้น ซึ่งส่งผลให้มีการรายงานเวลาแฝงต่ำกว่า ปริมาณการรีเฟรชชุดข้อมูลที่สูงขึ้น และแรงดันน้อยลงในระบบแหล่งข้อมูลและทรัพยากรความจุ
- จำนวนแถวตารางที่มีขนาดเล็กกว่าอาจส่งผลให้มีการประเมินการคำนวณที่รวดเร็วกว่า ซึ่งสามารถส่งมอบให้ประสิทธิภาพการทำงานของคิวรีโดยรวมได้ดียิ่งขึ้น

การลดข้อมูลที่แตกต่างกันที่ครอบคลุมในบทความนี้มีอยู่ 7 เทคนิคด้วยกัน สิ่งเหล่านี้รวมถึง:

- [ลบคอลัมน์ที่ไม่จำเป็นออก](#remove-unnecessary-columns)
- [ลบแถวที่ไม่จำเป็นออก](#remove-unnecessary-rows)
- [จัดกลุ่มตามและสรุป](#group-by-and-summarize)
- [ปรับชนิดข้อมูลคอลัมน์ให้เหมาะสม](#optimize-column-data-types)
- [การตั้งค่าสำหรับคอลัมน์แบบกำหนดเอง](#preference-for-custom-columns)
- [ปิดใช้งานการโหลดคิวรี Power Query](#disable-power-query-query-load)
- [สลับไปยังโหมดผสม](#switch-to-mixed-mode)

## <a name="remove-unnecessary-columns"></a>ลบคอลัมน์ที่ไม่จำเป็นออก

คอลัมน์ของตารางแบบจำลองมีวัตถุประสงค์หลักอยู่สองประการด้วยกัน:

- **การรายงาน** เพื่อให้ได้การออกแบบรายงานที่เหมาะสมกับตัวกรอง กลุ่มและสรุปข้อมูลแบบจำลอง
- **โครงสร้างแบบจำลอง** โดยสนับสนุนความสัมพันธ์ของแบบจำลอง การคำนวณแบบจำลอง บทบาทการรักษาความปลอดภัย และแม้แต่การจัดรูปแบบสีข้อมูล

คอลัมน์ที่ไม่ได้ทำหน้าที่ตามวัตถุประสงค์เหล่านี้อาจถูกลบออก จะเรียกการลบคอลัมน์เหล่านี้ว่า _การกรองแนวตั้ง_

เราขอแนะนำให้คุณออกแบบแบบจำลองที่มีจำนวนคอลัมน์ที่แน่นอนโดยยึดตามข้อกำหนดการรายงานที่ทราบ แน่นอนว่าข้อกำหนดเหล่านี้อาจมีการเปลี่ยนแปลงเมื่อเวลาผ่านไป แต่ต้องจำไว้ว่าจะสามารถเพิ่มคอลัมน์ในภายหลังได้ง่ายขึ้นกว่าที่จะลบคอลัมน์ออกในภายหลัง การลบคอลัมน์ออกสามารถแบ่งรายงานหรือโครงสร้างแบบจำลองออกได้

## <a name="remove-unnecessary-rows"></a>ลบแถวที่ไม่จำเป็นออก

ควรทำการโหลดตารางแบบจำลองด้วยจำนวนแถวน้อยที่สุดเท่าที่เป็นไปได้ ซึ่งสามารถดำเนินการได้โดยการโหลดชุดแถวที่กรองแล้วลงในตารางแบบจำลองด้วยเหตุผลสองประการที่แตกต่างกัน: เพื่อกรองตามเอนทิตี้หรือตามเวลา จะเรียกการลบแถวว่า _การกรองแนวนอน_

**การกรองตามเอนทิตี้** เกี่ยวข้องกับการโหลดชุดย่อยของข้อมูลต้นทางลงในแบบจำลอง ตัวอย่างเช่น ทำการโหลดหลักฐานสำหรับภูมิภาคเดียวเท่านั้น แทนที่จะโหลดหลักฐานการขายสำหรับยอดขายในทุกภูมิภาค วิธีการออกแบบนี้จะส่งผลให้มีแบบจำลองที่มีขนาดเล็กกว่า และยังสามารถกำจัดความจำเป็นในการกำหนดความปลอดภัยระดับแถว (แต่จะต้องให้สิทธิในชุดข้อมูลที่ระบุในบริการของ Power BI และสร้างรายงาน "ซ้ำ" ที่เชื่อมต่อกับชุดข้อมูลแต่ละรายการ) คุณสามารถใช้ประโยชน์จากพารามิเตอร์ของ Power Query และไฟล์ Power BI Template เพื่อให้ง่ายต่อการจัดการและการเผยแพร่ สำหรับข้อมูลเพิ่มเติม อ่านรายการเข้าที่บล็อก [เจาะลึกใน Query Parameter และ Power BI Template](https://powerbi.microsoft.com/blog/deep-dive-into-query-parameters-and-power-bi-templates/)

**การกรองตามเวลา** จะเกี่ยวข้องกับการจำกัดจำนวนของ _ประวัติข้อมูล_ ที่โหลดลงในตารางชนิดข้อเท็จจริง (และจำกัดจำนวนแถววันที่ที่โหลดลงในตารางวันที่แบบจำลอง) เราขอแนะนำว่าคุณไม่ควรโหลดประวัติการใช้ทั้งหมดที่มีโดยอัตโนมัติ เว้นแต่ว่านี่คือ ข้อกำหนดในการรายงานที่รู้จัก ซึ่งเป็นประโยชน์ในการทำความเข้าใจว่าตัวกรอง Power Query ที่ยึดตามเวลาสามารถทำเป็นพารามิเตอร์ได้ และแม้แต่ตั้งค่าให้ใช้ช่วงเวลาที่สัมพันธ์กัน (สัมพันธ์กับวันที่ทำการรีเฟรช ตัวอย่างเช่น เมื่อห้าปีที่ผ่านมา) นอกจากนี้ โปรดพิจารณาว่าการเปลี่ยนแปลงย้อนหลังไปยังตัวกรองเวลาจะไม่แบ่งรายงานออก ซึ่งจะส่งผลให้ประวัติข้อมูลที่พร้อมใช้งานในรายงานมีน้อยลง (หรือมากขั้น)

## <a name="group-by-and-summarize"></a>จัดกลุ่มตามและสรุป

บางทีเทคนิคที่มีประสิทธิภาพที่สุดเพื่อลดขนาดแบบจำลองคือ การโหลดข้อมูลที่สรุปไว้ล่วงหน้า สามารถใช้เทคนิคนี้เพื่อยกระดับของตารางชนิดข้อเท็จจริงได้ อย่างไรก็ตามต้องเลือกอย่างใดอย่างหนึ่งซึ่งส่งผลให้ต้องสูญเสียรายละเอียดไป

ตัวอย่างเช่น ตารางข้อเท็จจริงการขายต้นทางจะจัดเก็บหนึ่งแถวต่อบรรทัดใบสั่ง การลดข้อมูลที่สำคัญสามารถบรรลุผลได้โดยการสรุปเมตริกยอดขายทั้งหมดโดยจัดกลุ่มตามวันที่ ลูกค้าและผลิตภัณฑ์ จากนั้นพิจารณาว่าการลดข้อมูลที่มีนัยสำคัญมากยิ่งขึ้นสามารถบรรลุได้โดยการจัดกลุ่มตามวันที่ _ในระดับเดือน_ ซึ่งอาจเป็นไปได้ว่ามีการลดขนาดแบบจำลองที่เป็นไปได้ถึง 99% แต่แน่นอนว่าการรายงานในระดับวัน หรือระดับใบซื้อแต่ละครั้งไม่สามารถใช้ได้อีกต่อไป การตัดสินใจที่จะสรุปข้อมูลประเภทข้อเท็จจริงมักสัมพันธ์กับการต้องเลือกอย่างใดอย่างหนึ่ง การต้องเลือกอย่างใดอย่างหนึ่งนี้อาจลดลงโดยการออกแบบแบบจำลองผสม และจะมีการกล่าวถึงต่อไปในหัวข้อ [สลับไปยังโหมดผสม](#switch-to-mixed-mode)

## <a name="optimize-column-data-types"></a>ปรับชนิดข้อมูลคอลัมน์ให้เหมาะสม

กลไกการจัดเก็บข้อมูล VertiPaq ใช้โครงสร้างข้อมูลที่แยกต่างหากสำหรับแต่ละคอลัมน์ โครงสร้างข้อมูลเหล่านี้บรรลุการปรับให้เหมาะสมที่สุดสำหรับข้อมูลคอลัมน์ตัวเลข ซึ่งใช้การเข้ารหัสค่าตามการออกแบบ อย่างไรก็ตาม ข้อความและข้อมูลที่ไม่ใช่ตัวเลขอื่น ๆ จะใช้การเข้ารหัสข้อมูลที่ถูกย่อย ซึ่งจำเป็นต้องใช้กลไกการจัดเก็บข้อมูลเพื่อกำหนดตัวระบุตัวเลขให้กับแต่ละค่าข้อความที่ไม่ซ้ำกันที่ประกอบอยู่ในคอลัมน์ ซึ่งเป็นตัวระบุตัวเลขซึ่งจากนั้นจะถูกจัดเก็บไว้ในโครงสร้างข้อมูล ที่จำเป็นต้องใช้การค้นหาข้อความที่ถูกย่อยระหว่างจัดเก็บและคิวรี

ในบางอินสแตนซ์ที่เฉพาะเจาะจง คุณสามารถแปลงข้อมูลข้อความต้นฉบับเป็นค่าตัวเลขได้ ตัวอย่างเช่น หมายเลขใบสั่งขายอาจขึ้นต้นตามค่าข้อความได้อย่างสม่ำเสมอ (เช่น "SO123456") สามารถลบคำนำหน้าออก และค่าหมายเลขใบสั่งที่แปลงเป็นจำนวนเต็ม สำหรับตารางขนาดใหญ่ซึ่งอาจส่งผลให้มีการลดข้อมูลที่มีนัยสำคัญ โดยเฉพาะอย่างยิ่งเมื่อคอลัมน์ประกอบด้วยค่าคาร์ดินาลลิตี้ที่สูงหรือไม่ซ้ำกัน

ในตัวอย่างนี้ เราขอแนะนำให้คุณตั้งค่าคุณสมบัติการให้ข้อสรุปค่าเริ่มต้นของคอลัมน์เป็น "ไม่สรุป" การดำเนินการนี้จะช่วยลดการให้ข้อสรุปค่าหมายเลขใบสั่งซื้อที่ไม่เหมาะสม

## <a name="preference-for-custom-columns"></a>การตั้งค่าสำหรับคอลัมน์แบบกำหนดเอง

กลไกที่จัดเก็บข้อมูล VertiPaq จัดเก็บคอลัมน์จากการคำนวณแบบจำลอง (ที่กำหนดใน DAX) เช่นเดียวกับคอลัมน์ที่มีแหล่งที่มาจาก Power Query ตามปกติ อย่างไรก็ตาม โครงสร้างข้อมูลจะถูกจัดเก็บให้มีความแตกต่างกันเล็กน้อย และโดยทั่วไปแล้วจะทำให้การบีบอัดมีประสิทธิภาพลดลง นอกจากนี้จะมีการสร้างโครงสร้างข้อมูลขึ้นเมื่อมีการโหลดตาราง Power Query ทั้งหมด ซึ่งอาจส่งผลต่อเวลาในการรีเฟรชข้อมูลแบบขยายเวลา ดังนั้นจึงมีประสิทธิภาพน้อยกว่าในการเพิ่มคอลัมน์ตารางเป็นคอลัมน์ _จากการคำนวณ_มากกว่าคอลัมน์ _ที่คำนวณ_ ใน Power Query (นิยามไว้ใน M)

การตั้งค่าควรสร้างคอลัมน์แบบกำหนดเองใน Power Query เมื่อแหล่งที่มาคือ ฐานข้อมูล คุณสามารถทำให้ประสิทธิภาพการทำงานของการโหลดที่มากขึ้นสำเร็จได้ในสองวิธี สามารถกำหนดการคำนวณในคำสั่ง SQL (โดยใช้ภาษาคิวรีเดิมของผู้ให้บริการ) หรือสามารถทำให้ปรากฎเป็นคอลัมน์ในแหล่งข้อมูลได้

อย่างไรก็ตาม ในบางอินสแตนซ์ คอลัมน์จากการคำนวณแบบจำลองอาจเป็นตัวเลือกที่ดีกว่า ซึ่งอาจเป็นปัญหาเมื่อสูตรเกี่ยวข้องกับการประเมินหน่วยวัด หรือจำเป็นต้องมีฟังก์ชันการทำแบบจำลองเฉพาะที่ได้รับสนับสนุนในฟังก์ชัน DAX เท่านั้น สำหรับข้อมูลเกี่ยวกับตัวอย่างดังกล่าว ให้อ้างอิงถึงบทความ [ฟังก์ชันการทำความเข้าใจสำหรับลำดับชั้นหลัก-รองใน DAX](/dax/understanding-functions-for-parent-child-hierarchies-in-dax)

## <a name="disable-power-query-query-load"></a>ปิดใช้งานการโหลดคิวรี Power Query

ไม่ควรโหลดคิวรี Power Query ที่มีเป้าหมายสนับสนุนการรวมข้อมูลกับคิวรีอื่น ๆ ไปยังแบบจำลอง เพื่อหลีกเลี่ยงการโหลดคิวรีไปยังแบบจำลอง ดูแลเพื่อให้แน่ใจว่าคุณปิดใช้งานการโหลดคิวรีในอินสแตนซ์เหล่านี้

![การปิดใช้งานการโหลดสำหรับคิวรี Power Query](media/import-modeling-data-reduction/power-query-disable-query-load.png)

## <a name="switch-to-mixed-mode"></a>สลับไปยังโหมดผสม

ใน Power BI Desktop การออกแบบโหมดผสมจะสร้างแบบจำลองแบบรวม โดยพื้นฐานแล้วจะช่วยให้คุณสามารถกำหนดโหมดที่เก็บข้อมูล _สำหรับแต่ละตาราง_ ได้ ดังนั้น แต่ละตารางสามารถมีคุณสมบัติโหมดที่เก็บข้อมูลที่ตั้งค่าเป็นนำเข้าหรือ DirectQuery (แบบคู่คือ อีกหนึ่งตัวเลือก)

เทคนิคที่มีประสิทธิภาพในการลดขนาดแบบจำลองคือ การตั้งค่าคุณสมบัติโหมดที่เก็บข้อมูลสำหรับตารางชนิดข้อเท็จจริงที่มีขนาดใหญ่กว่าไปยัง DirectQuery หากพิจารณาว่าวิธีการออกแบบนี้สามารถทำงานร่วมกันกับหัวข้อ [จัดกลุ่มตามและสรุป](#group-by-and-summarize) ที่ได้มีการแนะนำก่อนหน้านี้ ตัวอย่างเช่น สามารถใช้ข้อมูลการขายที่สรุปเพื่อทำให้การรายงาน "ข้อสรุป" หน้าการดูรายละเอียดแนวลึกสามารถแสดงการขายย่อยสำหรับบริบทตัวกรองเฉพาะ (และแคบ) ที่แสดงใบสั่งขายในบริบททั้งหมด ในตัวอย่างนี้ การดูรายละเอียดผ่านหน้าจะรวมเอาวิชวลที่ยึดตามตาราง DirectQuery เพื่อค้นคืนข้อมูลใบสั่งขาย

อย่างไรก็ตาม ยังมีการรักษาความปลอดภัยและผลกระทบต่อประสิทธิภาพการทำงานที่เกี่ยวข้องกับแบบจำลองแบบรวมอีกมากมาย สำหรับข้อมูลเพิ่มเติม อ่านบทความ [ใช้แบบจำลองแบบรวมใน Power BI Desktop](../desktop-composite-models.md)

## <a name="next-steps"></a>ขั้นตอนถัดไป

สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการออกแบบแบบจำลองการนำเข้า Power BI ให้ดูบทความต่อไปนี้:

- [ใช้แบบจำลองแบบรวมใน Power BI Desktop](../desktop-composite-models.md)
- [โหมดที่เก็บข้อมูลใน Power BI Desktop](../desktop-storage-mode.md)
