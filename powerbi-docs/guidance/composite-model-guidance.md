---
title: คำแนะนำแบบจำลองแบบรวมใน Power BI Desktop
description: คำแนะนำเพื่อพัฒนาแบบจำลองแบบรวม
author: peter-myers
ms.reviewer: asaxton
ms.service: powerbi
ms.subservice: powerbi-desktop
ms.topic: conceptual
ms.date: 12/24/2019
ms.author: v-pemyer
ms.openlocfilehash: fa9ecd66d30839e169252065f7f736189b71b6ce
ms.sourcegitcommit: 7aa0136f93f88516f97ddd8031ccac5d07863b92
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 05/05/2020
ms.locfileid: "76889491"
---
# <a name="composite-model-guidance-in-power-bi-desktop"></a>คำแนะนำแบบจำลองแบบรวมใน Power BI Desktop

บทความนี้มีเป้าหมายให้ผู้สร้างแบบจำลองข้อมูลที่พัฒนาแบบจำลองแบบรวมใน Power BI ซึ่งจะอธิบายกรณีการใช้แบบจำลองแบบรวมและให้คำแนะนำในการออกแบบแก่คุณ โดยเฉพาะแล้ว คำแนะนำช่วยให้คุณกำหนดว่าแบบจำลองแบบรวมเหมาะสมสำหรับโซลูชันของคุณหรือไม่ ถ้าใช่ บทความนี้จะช่วยให้คุณสามารถออกแบบแบบจำลองที่เหมาะสมได้

> [!NOTE]
> บทนำสู่แบบจำลองแบบรวมนั้นไม่ครอบคลุมในบทความนี้ ถ้าคุณไม่คุ้นเคยกับแบบจำลองแบบรวม เราขอแนะนำให้คุณอ่านบทความ [ใช้แบบจำลองแบบรวมใน Power BI Desktop](../desktop-composite-models.md) ก่อน
>
> เนื่องจากแบบจำลองแบบรวมมีอย่างน้อยหนึ่งแหล่งที่มาของ DirectQuery ซึ่งเป็นสิ่งสำคัญที่คุณต้องมีความเข้าใจอย่างละเอียดเกี่ยวกับ [ความสัมพันธ์แบบจำลอง](../desktop-relationships-understand.md) [แบบจำลอง DirectQuery ](../desktop-directquery-about.md)และ [คำแนะนำการออกแบบแบบจำลอง DirectQuery](directquery-model-guidance.md)

## <a name="composite-model-use-cases"></a>กรณีการใช้งานแบบจำลองแบบรวม

เมื่อใดก็ตามที่เป็นไปได้ การพัฒนาแบบจำลองในโหมดนำเข้าจะดีที่สุด โหมดให้ความยืดหยุ่นในการออกแบบที่ดีที่สุด และให้ประสิทธิภาพการทำงานที่ดีที่สุด

อย่างไรก็ตามความท้าทายที่เกี่ยวข้องกับจำนวนข้อมูลขนาดใหญ่ หรือการรายงานเกี่ยวกับข้อมูลที่ใกล้เคียงเวลาจริง ไม่สามารถแก้ไขได้โดยแบบจำลองการนำเข้า ในกรณีเหล่านี้คุณสามารถพิจารณาใช้แบบจำลอง DirectQuery ซึ่งจะเก็บข้อมูลของคุณไว้ในแหล่งข้อมูลเดียวที่ [ได้รับการสนับสนุนโดยโหมด DirectQuery](../power-bi-data-sources.md)

นอกจากนี้ คุณสามารถพิจารณาเพื่อพัฒนาแบบจำลองแบบรวมได้ในสถานการณ์ดังต่อไปนี้

- แบบจำลองของคุณอาจเป็นแบบจำลอง DirectQuery แต่คุณต้องการเพิ่มประสิทธิภาพการทำงาน ในแบบจำลองแบบรวม สามารถปรับปรุงประสิทธิภาพการทำงานได้โดยการกำหนดค่าที่เก็บข้อมูลที่เหมาะสมสำหรับแต่ละตาราง คุณยังสามารถเพิ่ม [การรวม](../desktop-aggregations.md) ได้ การปรับให้เหมาะสมทั้งสองอย่างจะกล่าวถึงในบทความนี้ในภายหลัง
- คุณต้องการรวมแบบจำลอง DirectQuery กับข้อมูลเพิ่มเติม ซึ่งจะต้องถูกนำเข้าลงในแบบจำลอง สามารถโหลดข้อมูลที่นำเข้าจากแหล่งข้อมูลที่แตกต่างกันหรือจากตารางที่มีการคำนวณ
- คุณต้องการรวมแหล่งข้อมูล DirectQuery สองรายการหรือมากกว่าลงในแบบจำลองเดียว

> [!NOTE]
> แบบจำลองแบบรวมไม่สามารถรวมแหล่งข้อมูลการเชื่อมต่อสดหรือแหล่งฐานข้อมูลการวิเคราะห์ DirectQuery ไว้ด้วยกันได้ แหล่งข้อมูลการเชื่อมต่อสดรวมไปถึง [แบบจำลองที่โฮสต์ภายนอก](../service-datasets-understand.md#external-hosted-models)และชุดข้อมูล Power BI แหล่งฐานข้อมูลการวิเคราะห์ DirectQuery รวมไปถึงคลังสินค้า SAP Business และ SAP HANA

## <a name="optimize-model-design"></a>ปรับแต่งการออกแบบแบบจำลอง

แบบจำลองแบบรวมสามารถปรับให้เหมาะสมได้โดยการกำหนดค่าโหมด [ตารางที่เก็บข้อมูล](../desktop-storage-mode.md) และโดยการเพิ่ม [การรวม ](../desktop-aggregations.md)

### <a name="table-storage-mode"></a>โหมดตารางที่เก็บข้อมูล

ในแบบจำลองแบบรวม คุณสามารถกำหนดค่าโหมดที่เก็บข้อมูลสำหรับแต่ละตารางได้ (ยกเว้นตารางที่มีการคำนวณ):

- **DirectQuery**: เราขอแนะนำให้คุณตั้งค่าโหมดนี้สำหรับตารางที่แสดงถึงข้อมูลขนาดใหญ่ หรือจำเป็นต้องใช้ในการส่งผลลัพธ์ที่ใกล้เคียงกับการแสดงผลแบบเรียลไทม์ จะไม่มีการนำเข้าข้อมูลลงในตารางเหล่านี้ โดยทั่วไปตารางเหล่านี้จะเป็นตารางชนิดข้อเท็จจริง—ตารางที่ใช้สำหรับสรุป
- **นำเข้า**: เราขอแนะนำให้คุณตั้งค่าโหมดนี้สำหรับตารางชนิดมีมิติ—ตารางที่ใช้สำหรับการกรองและการจัดกลุ่ม ในความเป็นจริง นี่เป็นตัวเลือกเดียวสำหรับตารางที่ยึดตามแหล่งข้อมูลที่ไม่ได้รับการสนับสนุนโดยโหมด DirectQuery ตารางที่มีการคำนวณจะเป็นตารางที่นำเข้าเสมอ
- **คู่**: เราขอแนะนำให้คุณตั้งค่าโหมดนี้สำหรับตารางชนิมีดมิติ เมื่อมีความเป็นไปได้ที่ตารางเหล่านั้นจะได้รับการคิวรีร่วมกับตารางชนิดความจริง DirectQuery จากแหล่งที่มาเดียวกัน

มีหลายสถานการณ์ที่เป็นไปได้เมื่อ Power BI คิวรี แบบจำลองแบบรวม:

- **คิวรีเฉพาะตารางที่นำเข้าหรือตารางคู่เท่านั้น**: ข้อมูลทั้งหมดจะถูกดึงมาจากแคชแบบจำลอง ซึ่งจะส่งผลให้มีประสิทธิภาพการทำงานที่เร็วที่สุด สถานการณ์นี้เป็นเรื่องปกติสำหรับตารางชนิดมีมิติที่คิวรีโดยตัวกรองหรือการแสดงผลด้วยภาพตัวส่วนแบ่งข้อมูล
- **คิวรีตารางคู่หรือตาราง DirectQuery จากแหล่งข้อมูลเดียวกัน**: ข้อมูลทั้งหมดจะถูกดึงโดยการส่งคิวรีดั้งเดิมอย่างน้อยหนึ่งรายการไปยังแหล่งข้อมูล DirectQuery ซึ่งจะส่งผลให้มีประสิทธิภาพการทำงานที่เร็วที่สุดโดยเฉพาะอย่างยิ่งเมื่อมีดัชนีที่เหมาะสมในตารางต้นทาง สถานการณ์นี้เป็นเรื่องปกติสำหรับคิวรีที่เกี่ยวข้องกับตารางชนิดมีมิติแบบคู่และตารางชนิดข้อเท็จจริง DirectQuery คิวรีจะเป็น _ภายในของเกาะ_ และความสัมพันธ์ทั้งหมดทั้งแบบหนึ่งต่อหนึ่งหรือหนึ่งต่อกลุ่มได้รับการประเมินเป็น [ความสัมพันธ์ที่แข็งแกร่ง](../desktop-relationships-understand.md#strong-relationships)
- **คิวรีอื่นๆ ทั้งหมด**: คิวรีเหล่านี้เกี่ยวข้องกับความสัมพันธ์ข้ามเกาะ เนื่องจากตารางนำเข้าเกี่ยวข้องกับตาราง DirectQuery หรือตารางแบบคู่เกี่ยวข้องกับตาราง DirectQuery จากแหล่งที่มาที่แตกต่างกัน ซึ่งในกรณีนี้จะทำงานเหมือนเป็นตารางนำเข้า ความสัมพันธ์ทั้งหมดจะได้รับการประเมินเป็น [ความสัมพันธ์ที่อ่อนแอ](../desktop-relationships-understand.md#weak-relationships) นอกจากนี้ยังหมายความว่าการจัดกลุ่มที่ใช้กับตารางที่ไม่ใช่ DirectQuery จะต้องถูกส่งไปยังแหล่งที่มา DirectQuery เป็นตารางเสมือน ในกรณีนี้ คิวรีดั้งเดิมอาจขาดประสิทธิภาพได้ โดยเฉพาะสำหรับชุดการจัดกลุ่มขนาดใหญ่ และมีโอกาสที่จะเปิดเผยข้อมูลที่สำคัญในคิวรีดั้งเดิม

โดยสรุปแล้ว เราขอแนะนำให้คุณ:

- พิจารณาอย่างรอบคอบว่าแบบจำลองแบบรวมคือโซลูชันที่เหมาะสม ในขณะที่อนุญาตให้มีการรวมในระดับแบบจำลองของแหล่งข้อมูลที่แตกต่างกัน นอกจากนี้ยังแนะนำความซับซ้อนของการออกแบบที่มีผลกระทบที่เป็นไปได้
- ตั้งค่าโหมดที่เก็บข้อมูลไปยัง **DirectQuery** เมื่อตารางที่เป็นตารางชนิดข้อเท็จจริงซึ่งจัดเก็บข้อมูลขนาดใหญ่ หรือจำเป็นต้องให้ข้อมูลใกล้เคียงกับการแสดงผลแบบเรียลไทม์
- ตั้งค่าโหมดที่เก็บข้อมูลเป็น **คู่** เมื่อตารางเป็นตารางชนิดมีมิติและ จะได้รับการคิวรีร่วมกับ ตารางชนิดข้อเท็จจริง **DirectQuery** ที่ยึดตามแหล่งที่มาเดียวกัน
- กำหนดค่าความถี่ในการรีเฟรชที่เหมาะสมเพื่อให้แคชของแบบจำลองสำหรับตารางคู่ (และตารางที่มีการคำนวณที่ขึ้นต่อกัน) มีการซิงค์กับฐานข้อมูลต้นทาง
- มุ่งมั่นที่จะทำให้แน่ใจว่าข้อมูลที่สอดคล้องกันในแหล่งข้อมูล (รวมถึงแคชแบบจำลอง) —ความสัมพันธ์ที่อ่อนแอจะนำแถวออก เมื่อค่าคอลัมน์ที่เกี่ยวข้องไม่ตรงกัน
- ปรับปรุงแหล่งข้อมูล DirectQuery ให้เหมาะสม ด้วยดัชนีที่เหมาะสมสำหรับการรวมที่มีประสิทธิภาพ การกรอง และการจัดกลุ่ม
- อย่าโหลดข้อมูลที่สำคัญลงในตารางการนำเข้าหรือตารางคู่ ถ้ามีความเสี่ยงว่าคิวรีแบบดั้งเดิมจะถูกสกัดกั้น - สำหรับข้อมูลเพิ่มเติม ดู [ใช้แบบจำลองแบบรวมใน Power BI Desktop (ผลกระทบด้านความปลอดภัย)](../desktop-composite-models.md#security-implications)

### <a name="aggregations"></a>การรวม

คุณสามารถเพิ่มการรวมไปยังตาราง DirectQuery ในแบบจำลองแบบรวมของคุณได้ การรวมจะถูกแคชไว้ในแบบจำลอ เพื่อให้ทำงานเป็นตารางนำเข้า (แม้ว่าจะไม่สามารถใช้งานได้เหมือนตารางแบบจำลอง) วัตถุประสงค์ คือ เพื่อปรับปรุงประสิทธิภาพการทำงานสำหรับคิวรีที่ "grain สูงขึ้น" สำหรับข้อมูลเพิ่มเติม ดู[การรวมใน Power BI Desktop](../desktop-aggregations.md)

เราแนะนำให้ตารางการรวมเป็นไปตามกฎพื้นฐาน: จำนวนแถวควรมีตัวคูณที่น้อยกว่าอย่างน้อย 10 ตัวคูณของตารางต้นแบบ ตัวอย่างเช่น ถ้าตารางต้นแบบจัดเก็บแถว 1000 ล้านแถว แล้วตารางการรวมไม่ควรเกิน 100 ล้านแถว กฎนี้ช่วยให้แน่ใจว่ามีประสิทธิภาพการทำงานที่เพียงพอเทียบกับค่าใช้จ่ายในการสร้างและการรักษาตารางการรวม

## <a name="next-steps"></a>ขั้นตอนถัดไป

สำหรับข้อมูลเพิ่มเติมที่เกี่ยวข้องกับบทความนี้ โปรดดูทรัพยากรต่อไปนี้:

- [ใช้แบบจำลองแบบรวมใน Power BI Desktop](../desktop-composite-models.md)
- [ความสัมพันธ์ของแบบจำลองใน Power BI Desktop](../desktop-relationships-understand.md)
- [แบบจำลอง DirectQuery ใน Power BI Desktop](../desktop-directquery-about.md)
- [ใช้ DirectQuery ใน Power BI Desktop](../desktop-use-directquery.md)
- [การแก้ไขปัญหาแบบจำลอง DirectQuery ใน Power BI Desktop](../desktop-directquery-troubleshoot.md)
- [แหล่งข้อมูล Power BI](../power-bi-data-sources.md)
- [โหมดที่เก็บข้อมูลใน Power BI Desktop](../desktop-storage-mode.md)
- [การรวมใน Power BI Desktop](../desktop-aggregations.md)
- มีคำถามหรือไม่ [ลองถามชุมชน Power BI](https://community.powerbi.com/)
- มีข้อเสนอแนะไหม [สนับสนุนแนวคิดในการปรับปรุง Power BI](https://ideas.powerbi.com)
