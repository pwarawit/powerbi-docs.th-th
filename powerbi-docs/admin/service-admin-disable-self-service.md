---
title: เปิดหรือปิดใช้งานการลงชื่อสมัครใช้และการสั่งซื้อบริการด้วยตนเอง
description: วิธีการข้อมูลสำหรับผู้ดูแลระบบในการปิดความสามารถสำหรับผู้ใช้ในการสมัครใช้บริการ Power BI และซื้อหรืออัปเกรดสิทธิการใช้งาน
author: kfollis
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-admin
ms.topic: conceptual
ms.date: 04/08/2020
ms.author: kfollis
ms.custom: licensing support
LocalizationGroup: Administration
ms.openlocfilehash: 751db634ceb9e7d6349b35f7348b09e0c0d648ed
ms.sourcegitcommit: 3f864ec22f99ca9e25cda3a5abda8a5f69ccfa8e
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 05/29/2020
ms.locfileid: "84160076"
---
# <a name="enable-or-disable-self-service-sign-up-and-purchasing"></a>เปิดหรือปิดใช้งานการลงชื่อสมัครใช้และการสั่งซื้อบริการด้วยตนเอง

ในองค์กรส่วนใหญ่ จะเปิดใช้งานการลงชื่อสมัครใช้บริการด้วยตนเองไว้เป็นค่าเริ่มต้นอยู่แล้ว ผู้ใช้แต่ละคนในองค์กรของคุณสามารถลงทะเบียน Power BI โดยใช้บัญชีของสถานที่ทำงานหรือของโรงเรียนของตนเองได้ และผู้ใช้อาจได้รับการเสนอตัวเลือกเพื่อซื้อสิทธิการใช้งาน Power BI Pro โดยตรง ถ้าผู้ใช้พยายามใช้งานคุณลักษณะที่ต้องใช้ในระดับ Pro ในฐานะผู้ดูแลระบบ คุณสามารถกำหนดได้ว่าจะเปิดหรือปิดใช้งานการลงชื่อสมัครใช้บริการด้วยตนเอง และคุณยังสามารถควบคุมว่าผู้ใช้ในองค์กรของคุณสามารถทำการซื้อบริการต่าง ๆ ด้วยตนเองเพื่อรับสิทธิการใช้งานของตนเองได้หรือไม่อีกด้วย

> [!NOTE]
>ถ้าคุณได้รับ Power BI ผ่านทางผู้ให้บริการโซลูชัน Cloud ของ Microsoft (CSP) การตั้งค่าอาจถูกปิดใช้งานไว้เพื่อไม่ให้ผู้ใช้สามารถลงทะเบียนเป็นรายบุคคลได้ CSP ของคุณอาจทำหน้าที่เป็นผู้ดูแลระบบส่วนกลางสำหรับองค์กรของคุณด้วย ซึ่งทำให้คุณต้องติดต่อพวกเขาเพื่อช่วยคุณเปลี่ยนการตั้งค่านี้
>
>

คุณใช้คำสั่ง PowerShell เพื่อเปลี่ยนการตั้งค่าที่ควบคุมการลงชื่อสมัครใช้บริการและการซื้อด้วยตนเอง มีสองการตั้งค่าที่ควบคุมว่าผู้ใช้ในองค์กรของคุณสามารถทำการลงชื่อสมัครใช้บริการด้วยตนเองหรือทำการสั่งซื้อบริการของตนเองได้

- หากคุณต้องการปิดใช้งานการลงชื่อสมัครใช้บริการด้วยตนเองทั้งหมด ให้เปลี่ยนการตั้งค่าใน Azure Active Directory ที่ชื่อ **AllowAdHocSubscriptions** โดยใช้คำสั่ง Azure AD PowerShell ให้ปฏิบัติตามขั้นตอนในบทความนี้เพื่อ [เปิดหรือปิดใช้งานการลงชื่อสมัครใช้บริการด้วยตนเอง](#enable-or-disable-self-service-signup) ตัวเลือกนี้จะเปิดใช้งานการลงชื่อสมัครใช้บริการด้วยตนเองสำหรับแอปและบริการที่ใช้งานระบบคลาวด์ของ Microsoft *ทั้งหมด*

- หากคุณต้องการป้องกันไม่ให้ผู้ใช้ซื้อสิทธิการใช้งาน Pro ของตนเอง ให้เปลี่ยนการตั้งค่า **AllowSelfServicePurchase** โดยใช้คำสั่ง MSCommerce PowerShell การตั้งค่านี้ช่วยให้คุณปิดการสั่งซื้อบริการผลิตภัณฑ์ที่เฉพาะเจาะจงด้วยตนเอง ให้ปฏิบัติตามขั้นตอนในบทความนี้เพื่อ[เปิดหรือปิดใช้งานการสั่งซื้อสิทธิการใช้งาน Power BI Pro ด้วยตนเอง](#enable-or-disable-self-service-purchase)

## <a name="enable-or-disable-self-service-signup"></a>เปิดหรือปิดใช้งานการลงชื่อสมัครใช้บริการด้วยตนเอง

หากมีการเปิดใช้งานการลงชื่อสมัครใช้บริการด้วยตนเองไว้ ค่าของ **AllowAdHocSubscriptions** จะเป็น*จริง* มาดูกันว่าจะเกิดอะไรขึ้นหากคุณเปลี่ยนการตั้งค่านี้เป็น*เท็จ*:

- หากคุณเปลี่ยนการตั้งค่าจากจริงไปเป็นเท็จ จะเป็นการปิดกั้นไม่ให้ผู้ใช้ใหม่ในองค์กรของคุณทำการลงทะเบียนเป็นรายบุคคล สำหรับผู้ใช้ที่ลงทะเบียน Power BI ก่อนเปลี่ยนแปลงการตั้งค่าจะยังคงมีสิทธิ์ในสิทธิการใช้งานอยู่

- หากคุณเปลี่ยนการตั้งค่าเป็นเท็จ ผู้ใช้ที่มีสิทธิการใช้งาน Power BI (ฟรี) อยู่แล้วจะยังคงสามารถลงทะเบียนสำหรับ Power BI Pro รุ่นทดลองเพื่อใช้เฉพาะรายบุคคลได้

- ผู้ดูแลระบบจำเป็นต้องกำหนดสิทธิการใช้งาน Power BI ทั้งหมดให้กับผู้ใช้ใหม่ที่ต้องการสิทธิ

### <a name="before-you-begin"></a>ก่อนที่คุณเริ่มต้น

ขั้นตอนเหล่านี้ใช้คำสั่ง PowerShell ของ Azure Active Directory เพื่อเปลี่ยนค่าของการตั้งค่า **AllowAdHocSubscriptions** คุณต้องมีโมดูล Azure AD PowerShell ที่ติดตั้งไว้สำหรับคำสั่งเหล่านี้เพื่อให้สามารถใช้งานได้ คุณสามารถศึกษาข้อมูลเพิ่มเติมเกี่ยวกับการใช้ PowerShell ได้ที่ [เริ่มต้นใช้งาน Windows PowerShell](https://docs.microsoft.com/powershell/scripting/getting-started/getting-started-with-windows-powershell?view=powershell-7)

ในการติดตั้งโมดูล Azure AD ให้เริ่มใช้งาน Windows PowerShell ในฐานะผู้ดูแลระบบ ตรวจสอบให้มั่นใจว่านโยบายการดำเนินการภายในเครื่องของคุณอนุญาตให้คุณเรียกใช้สคริปต์ได้ หากคุณพบปัญหา โปรอ่าน[นโยบายการดำเนินการของ PowerShell](https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_execution_policies?view=powershell-7#powershell-execution-policies) เพื่อเรียนรู้วิธีการเปลี่ยนแปลงนโยบายภายในเครื่องของคุณ

เรียกใช้คำสั่งต่อไปนี้เพื่อติดตั้งโมดูล Azure AD:

```powershell
Install-Module MSOnline
```

### <a name="change-the-self-service-signup-policy"></a>เปลี่ยนนโยบายการลงชื่อสมัครใช้บริการด้วยตนเอง

ใน PowerShell ให้เรียกใช้คำสั่งต่อไปนี้เพื่อเชื่อมต่อไปยัง Azure AD:

```powershell
Connect-MsolService
```

ป้อนข้อมูลประจำตัวผู้ดูแลระบบของคุณลงในกล่องโต้ตอบการลงชื่อเข้าใช้ จากนั้นดำเนินการรับรองความถูกต้องแบบสองปัจจัยที่อาจจำเป็นต้องทำ หลังจากการตรวจสอบ คุณจะกลับไปยังหน้าต่าง PowerShell

หากต้องการดูการตั้งค่าปัจจุบัน ให้เรียกใช้คำสั่งต่อไปนี้ ผลลัพธ์จะถูกส่งไปยังรายการที่จัดรูปแบบไว้โดยใช้สวิตช์ "fl"

```powershell
Get-MsolCompanyInformation | fl AllowAdHocSubscriptions
```

หากต้องการเปลี่ยนการตั้งค่าปัจจุบัน ให้เรียกใช้คำสั่งนี้:

```powershell
Set-MsolCompanySettings -AllowAdHocSubscriptions $false
```

หลังจากเรียกใช้คำสั่งนี้ ระบบจะปิดการลงชื่อสมัครใช้บริการด้วยตนเองของผู้ใช้ทั้งหมด หากต้องการเปิดใช้งานอีกครั้ง ให้เรียกใช้คำสั่งนี้ใหม่แล้วตั้งค่าให้เป็น $true

## <a name="enable-or-disable-self-service-purchase"></a>เปิดหรือปิดใช้งานการสั่งซื้อบริการด้วยตนเอง

หากเปิดใช้งานการสั่งซื้อบริการด้วยตนเองไว้ ค่าของ **AllowSelfServicePurchase** จะเป็น*จริง* มาดูกันว่าจะเกิดอะไรขึ้นหากคุณเปลี่ยนการตั้งค่านี้เป็น*เท็จ*:

- หากคุณเปลี่ยนการตั้งค่าจากจริงไปเป็นเท็จ จะเป็นการปิดกั้นไม่ให้ผู้ใช้ในองค์กรของคุณทำการสั่งซื้อสิทธิการใช้งาน Power BI Pro ของตนเองได้ สำหรับผู้ใช้ที่ซื้อ Power BI ก่อนเปลี่ยนแปลงการตั้งค่าจะยังคงมีสิทธิ์ในสิทธิการใช้งานอยู่

- หากคุณเปลี่ยนการตั้งค่าเป็นเท็จ ผู้ใช้ที่มีสิทธิการใช้งาน Power BI (ฟรี) จะไม่สามารถสั่งซื้อ Power BI Pro ของตนเองได้ 

- ผู้ดูแลระบบจำเป็นต้องกำหนดสิทธิ์การใช้งานแบบ Pro ให้กับผู้ใช้ทั้งหมดที่ต้องการ

### <a name="before-you-begin"></a>ก่อนที่คุณเริ่มต้น

ขั้นตอนเหล่านี้ใช้คำสั่ง MSCommerce PowerShell เพื่อเปลี่ยนค่าในการตั้งค่าของ **AllowSelfServicePurchase** คุณต้องมีโมดูล MSCommerce PowerShell ที่ติดตั้งไว้สำหรับคำสั่งเหล่านี้เพื่อให้สามารถใช้งานได้ คุณสามารถศึกษาข้อมูลเพิ่มเติมเกี่ยวกับการใช้ PowerShell ได้ที่ [เริ่มต้นใช้งาน Windows PowerShell](https://docs.microsoft.com/powershell/scripting/getting-started/getting-started-with-windows-powershell?view=powershell-7)

ในการติดตั้งโมดูล MSCommerce ให้เริ่มใช้งาน Windows PowerShell ในฐานะผู้ดูแลระบบ ตรวจสอบให้มั่นใจว่านโยบายการดำเนินการภายในเครื่องของคุณอนุญาตให้คุณเรียกใช้สคริปต์ได้ หากคุณพบปัญหา โปรอ่าน[นโยบายการดำเนินการของ PowerShell](https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_execution_policies?view=powershell-7#powershell-execution-policies) เพื่อเรียนรู้วิธีการเปลี่ยนแปลงนโยบายภายในเครื่องของคุณ

เรียกใช้คำสั่งต่อไปนี้เพื่อติดตั้งโมดูล MSCommerce:

```powershell
Install-Module -name MSCommerce
```

### <a name="change-the-self-service-signup-policy"></a>เปลี่ยนนโยบายการลงชื่อสมัครใช้บริการด้วยตนเอง

ใน PowerShell ให้เรียกใช้คำสั่งต่อไปนี้เพื่อเชื่อมต่อ:

```powershell
Connect-MSCommerce
```

ป้อนข้อมูลประจำตัวผู้ดูแลระบบของคุณลงในกล่องโต้ตอบการลงชื่อเข้าใช้ จากนั้นดำเนินการรับรองความถูกต้องแบบสองปัจจัยที่อาจจำเป็นต้องทำ หลังจากการตรวจสอบ หน้าต่าง PowerShell จะแสดงการเชื่อมต่อที่สำเร็จ

หากต้องการดูการตั้งค่าปัจจุบัน ให้เรียกใช้คำสั่งต่อไปนี้ เพื่อป้องกันการตัดทอนข้อความ ผลลัพธ์จะถูกส่งไปยังรายการที่จัดรูปแบบไว้โดยใช้สวิตช์ "fl"

```powershell
Get-MSCommercePolicy -PolicyId AllowSelfServicePurchase | fl
```

คุณสามารถปิดใช้งานการตั้งค่าที่อนุญาตให้มีการสั่งซื้อบริการของตนเองสำหรับแต่ละผลิตภัณฑ์โดยการแจ้ง **ProductId** เมื่อต้องการเปลี่ยนการตั้งค่าปัจจุบันสำหรับบริการของ Power BI ให้เรียกใช้คำสั่งนี้:

```powershell
Update-MSCommerceProductPolicy -PolicyId AllowSelfServicePurchase -ProductId CFQ7TTC0L3PB -Enabled $False
```

หลังจากเรียกใช้คำสั่งนี้ ระบบจะปิดการสั่งซื้อบริการด้วยตนเองของผู้ใช้ทั้งหมด หากต้องการเปิดใช้งานอีกครั้ง ให้เรียกใช้คำสั่งนี้ใหม่แล้วตั้งค่าให้เป็น $true

## <a name="next-steps"></a>ขั้นตอนถัดไป

สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการสั่งซื้อบริการด้วยตนเองใน Power BI และส่วนอื่น ๆ ของ Power Platform ใหอ่านบทความเหล่านี้:

- [คำถามที่พบบ่อยเกี่ยวกับการสั่งซื้อบริการด้วยตนเอง](https://docs.microsoft.com/microsoft-365/commerce/subscriptions/self-service-purchase-faq?view=o365-worldwide#admin-capabilities)
- [ใช้ AllowSelfServicePurchase สำหรับโมดูล MSCommerce PowerShell](https://docs.microsoft.com/microsoft-365/commerce/subscriptions/allowselfservicepurchase-powershell?view=o365-worldwide)
