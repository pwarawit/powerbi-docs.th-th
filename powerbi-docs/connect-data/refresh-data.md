---
title: การรีเฟรชข้อมูลใน Power BI
description: บทความนี้อธิบายคุณสมบัติการรีเฟรชข้อมูลของ Power BI และความเชื่อมโยงกันในระดับแนวคิด
author: davidiseminger
ms.reviewer: kayu
ms.service: powerbi
ms.subservice: powerbi-service
ms.topic: conceptual
ms.date: 05/27/2020
ms.author: davidi
LocalizationGroup: Data refresh
ms.openlocfilehash: 9bc8f7c100acc3805fbe6ab949e3584cb5fd26e1
ms.sourcegitcommit: a7b142685738a2f26ae0a5fa08f894f9ff03557b
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 05/28/2020
ms.locfileid: "84121042"
---
# <a name="data-refresh-in-power-bi"></a>การรีเฟรชข้อมูลใน Power BI

Power BI ช่วยให้คุณสามารถเปลี่ยนจากข้อมูลเป็นข้อมูลเชิงลึกเพื่อดำเนินการได้อย่างรวดเร็ว แต่คุณต้องตรวจสอบให้แน่ใจว่าข้อมูลในรายงาน Power BI และแดชบอร์ดเป็นข้อมูลล่าสุด การเรียนรู้วิธีการรีเฟรชข้อมูลมักเป็นสิ่งสำคัญเพื่อให้ได้ผลลัพธ์ที่แม่นยำ

บทความนี้อธิบายคุณสมบัติการรีเฟรชข้อมูลของ Power BI และความเชื่อมโยงกันในระดับแนวคิด นอกจากนี้ยังมีวิธีปฏิบัติที่ดีที่สุดและเคล็ดลับเพื่อหลีกเลี่ยงปัญหาการรีเฟรชทั่วไป เนื้อหาจะกำหนดโครงสร้างเพื่อช่วยให้คุณเข้าใจว่าการรีเฟรชข้อมูลทำงานอย่างไร สำหรับคำแนะนำทีละขั้นตอนที่เป็นเป้าหมายเพื่อกำหนดค่าการรีเฟรชข้อมูล ให้ดูที่บทช่วยสอนและคำแนะนำวิธีการที่ระบุไว้ในส่วนขั้นตอนถัดไปที่ท้ายบทความนี้

## <a name="understanding-data-refresh"></a>การทำความเข้าใจเกี่ยวกับการรีเฟรชข้อมูล

เมื่อใดก็ตามที่คุณรีเฟรชข้อมูล Power BI จะต้องทำการคิวรีแหล่งข้อมูลพื้นฐาน บางทีอาจโหลดข้อมูลจากแหล่งข้อมูลลงในชุดข้อมูลจากนั้นอัปเดตการแสดงภาพข้อมูลใด ๆ ในรายงานหรือแดชบอร์ดที่ใช้ชุดข้อมูลที่อัปเดต กระบวนการทั้งหมดประกอบด้วยหลายขั้นตอน ขึ้นอยู่กับโหมดการจัดเก็บข้อมูลของชุดข้อมูลตามที่อธิบายไว้ในส่วนต่อไปนี้ี้

เพื่อทำความเข้าใจวิธีการที่ Power BI รีเฟรชชุดข้อมูล รายงาน และแดชบอร์ด คุณต้องการทราบแนวคิดต่อไปนี้:

- **โหมดการจัดเก็บข้อมูลและชนิดของชุดข้อมูล**: โหมดการจัดเก็บข้อมูลและชนิดของชุดข้อมูลที่ Power BI สนับสนุน มีข้อกำหนดการรีเฟรชที่แตกต่างกัน คุณสามารถเลือกระหว่างการนำเข้าข้อมูลอีกครั้งใน Power BI เพื่อดูการเปลี่ยนแปลงใด ๆ ที่เกิดขึ้นหรือทำการคิวรีข้อมูลโดยตรงที่แหล่งที่มา
- **ชนิดการรีเฟรชของ Power BI**: โดยไม่คำนึงถึงข้อมูลจำเพาะของชุดข้อมูล การทราบวิธีการรีเฟรชประเภทต่าง ๆ สามารถช่วยให้คุณเข้าใจว่า Power BI อาจใช้เวลาในระหว่างการดำเนินการรีเฟรช และรวมรายละเอียดเหล่านี้กับข้อมูลจำเพาะของโหมดการจัดเก็บข้อมูลจะช่วยให้เข้าใจสิ่งที่ Power BI ดำเนินการอย่างตรงกันเมื่อคุณเลือก**รีเฟรชเดี๋ยวนี้**สำหรับชุดข้อมูล

### <a name="storage-modes-and-dataset-types"></a>โหมดการจัดเก็บข้อมูลและชนิดของชุดข้อมูล

ชุดข้อมูล Power BI สามารถทำงานในโหมดใดโหมดหนึ่งต่อไปนี้เพื่อเข้าถึงข้อมูลจากแหล่งข้อมูลที่หลากหลาย สำหรับข้อมูลเพิ่มเติม โปรดดู [โหมดการจัดเก็บข้อมูลใน Power BI Desktop](../transform-model/desktop-storage-mode.md)

- โหมดการนำเข้า
- โหมด DirectQuery
- โหมด LiveConnect
- โหมดส่ง

แผนภาพต่อไปนี้แสดงให้เห็นถึงโฟลว์ของข้อมูลที่แตกต่างกัน ขึ้นอยู่กับโหมดการจัดเก็บข้อมูล จุดที่สำคัญที่สุดคือเฉพาะชุดข้อมูลของโหมดการนำเข้าเท่านั้นที่จำเป็นต้องมีการรีเฟรชข้อมูลจากแหล่งข้อมูล ซึ่งจำเป็นต้องรีเฟรชเนื่องจากมีเพียงชุดข้อมูลประเภทนี้ที่นำเข้าข้อมูลจากแหล่งข้อมูล และข้อมูลที่นำเข้าอาจได้รับการอัปเดตตามปกติหรือแบบเฉพาะกิจ ชุดข้อมูล DirectQuery และชุดข้อมูลในโหมด LiveConnect ใน Analysis Services จะไม่นำเข้าข้อมูล แต่จะคิวรีแหล่งข้อมูลพื้นฐานที่มีการโต้ตอบกับผู้ใช้ทุกคน ชุดข้อมูลในโหมดส่งไม่สามารถเข้าถึงแหล่งข้อมูลใด ๆ ได้โดยตรง แต่ต้องการให้คุณส่งข้อมูลไปยัง Power BI ข้อกำหนดการรีเฟรชชุดข้อมูลจะแตกต่างกันไป ขึ้นอยู่กับโหมดการจัดเก็บข้อมูล/ประเภทชุดข้อมูล

![โหมดการจัดเก็บข้อมูลและชนิดของชุดข้อมูล](media/refresh-data/storage-modes-dataset-types-diagram.png)

#### <a name="datasets-in-import-mode"></a>ชุดข้อมูลในโหมดการนำเข้า

Power BI นำเข้าข้อมูลจากแหล่งข้อมูลต้นฉบับไปยังชุดข้อมูล รายงาน Power BI และคิวรีแดชบอร์ดที่ส่งไปยังชุดข้อมูลจะส่งคืนผลลัพธ์จากตารางและคอลัมน์ที่นำเข้า คุณอาจถือว่าชุดข้อมูลดังกล่าวเป็นส่วนหนึ่งของการคัดลอกในตอนนั้น เนื่องจาก Power BI ทำการคัดลอกข้อมูล คุณต้องรีเฟรชชุดข้อมูลเพื่อดึงข้อมูลการเปลี่ยนแปลงจากแหล่งข้อมูลพื้นฐาน

เนื่องจาก Power BI ทำการแคชข้อมูล ขนาดชุดข้อมูลของโหมดการนำเข้าจึงมีความสำคัญ ดูตารางต่อไปนี้สำหรับขนาดชุดข้อมูลสูงสุดต่อความจุ รักษาให้อยู่ต่ำกว่าขนาดชุดข้อมูลสูงสุดเพื่อหลีกเลี่ยงปัญหาการรีเฟรชที่อาจเกิดขึ้นหากชุดข้อมูลของคุณต้องการมากกว่าทรัพยากรที่มีสูงสุดในระหว่างการดำเนินการรีเฟรช

| ประเภทความจุ | ขนาดชุดข้อมูลสูงสุด |
| --- | --- |
| แชร์, A1, A2 หรือ A3 | 1 GB |
| A4 หรือ P1 | 3 GB |
| A5 หรือ P2 | 6 GB |
| A6 หรือ P3 | 10 GB |
| | |

#### <a name="datasets-in-directqueryliveconnect-mode"></a>ชุดข้อมูลในโหมด DirectQuery/LiveConnect

Power BI ไม่นำเข้าข้อมูลผ่านการเชื่อมต่อที่ใช้งานในโหมด DirectQuery/LiveConnect แต่ชุดข้อมูลจะส่งกลับผลลัพธ์จากแหล่งข้อมูลพื้นฐานเมื่อใดก็ตามที่รายงานหรือแดชบอร์ดทำการคิวรีชุดข้อมูล Power BI จะแปลงและส่งต่อคิวรีไปยังแหล่งข้อมูล

แม้ว่าโหมด DirectQuery และ LiveConnect จะคล้ายกันกับที่ Power BI ส่งต่อการคิวรีไปยังแหล่งข้อมูล แต่สิ่งสำคัญคือต้องทราบว่า Power BI ไม่จำเป็นต้องแปลงการคิวรีในโหมด LiveConnect คิวรีจะตรงไปยังอินสแตนซ์ Analysis Services ที่โฮสต์ฐานข้อมูลโดยไม่ต้องใช้ทรัพยากรในความจุที่ใช้ร่วมกันหรือความจุพรีเมียม

เนื่องจาก Power BI ไม่นำเข้าข้อมูล คุณจึงไม่จำเป็นต้องเรียกใช้การรีเฟรชข้อมูล อย่างไรก็ตาม Power BI ยังคงดำเนินการรีเฟรชไทล์ และอาจรวมถึงการรีเฟรชรายงานตามที่อธิบายในส่วนถัดไปเกี่ยวกับชนิดของการรีเฟรช ไทล์คือภาพวิชวลรายงานที่ปักหมุดไว้ที่แดชบอร์ด และการรีเฟรชไทล์ของแดชบอร์ดเกิดขึ้นประมาณทุกชั่วโมงเพื่อให้ไทล์แสดงผลลัพธ์ล่าสุด คุณสามารถเปลี่ยนแปลงกำหนดตารางเวลาในการตั้งค่าชุดข้อมูลตามสกรีนช็อตด้านล่าง หรือบังคับให้มีการอัปเดตแดชบอร์ดด้วยตนเอง โดยใช้ตัวเลือก**รีเฟรชเดี๋ยวนี้**ได้

![กำหนดตารางเวลาการรีเฟรช](media/refresh-data/refresh-schedule.png)

> [!NOTE]
> ส่วน**รีเฟรชแคชตามกำหนดเวลา**ของแท็บ**ชุดข้อมูล**จะไม่พร้อมใช้งานสำหรับชุดข้อมูลในโหมดการนำเข้า ชุดข้อมูลเหล่านี้ไม่จำเป็นต้องทำการรีเฟรชไทล์แยกเนื่องจาก Power BI จะรีเฟรชไทล์โดยอัตโนมัติในระหว่างการรีเฟรชข้อมูลตามกำหนดเวลาหรือตามคำขอ

#### <a name="push-datasets"></a>ส่งชุดข้อมูล

ชุดข้อมูลการส่งไม่มีคำจำกัดความที่เป็นทางการของแหล่งข้อมูลดังนั้นจึงไม่ต้องการให้คุณทำการรีเฟรชข้อมูลใน Power BI คุณทำการรีเฟรชได้โดยการส่งข้อมูลของคุณเข้าไปในชุดข้อมูลผ่านบริการหรือกระบวนการภายนอกเช่น Azure Stream Analyticss วิธีนี้เป็นวิธีแบบทั่วไปสำหรับการวิเคราะห์แบบเรียลไทม์ด้วย Power BI Power BI ยังคงดำเนินการรีเฟรชแคชสำหรับไทล์ใด ๆ ที่ใช้อยู่ด้านบนของชุดข้อมูลการส่ง สำหรับรายละเอียด ดู[บทช่วยสอน: Stream Analytics และ Power BI: แดชบอร์ดการวิเคราะห์แบบเรียลไทม์สำหรับการสตรีมข้อมูล](/azure/stream-analytics/stream-analytics-power-bi-dashboard)

> [!NOTE]
> โหมดส่งมีข้อจำกัดหลายอย่างตามที่ระบุไว้ใน[ข้อจำกัดของ Power BI REST API](../developer/automation/api-rest-api-limitations.md)

### <a name="power-bi-refresh-types"></a>ชนิดการรีเฟรชของ Power BI

การดำเนินการรีเฟรช Power BI อาจประกอบด้วยการรีเฟรชหลายประเภทรวมถึงการรีเฟรชข้อมูล การรีเฟรช OneDrive การรีเฟรชของแคชคิวรี การรีเฟรชไทล์ และการรีเฟรชภาพวิชวลของรายงาน ในขณะที่ Power BI กำหนดขั้นตอนการรีเฟรชที่จำเป็นสำหรับชุดข้อมูลที่กำหนดไว้โดยอัตโนมัติ คุณควรทราบว่าการรีเฟรชเหล่านี้ก่อให้เกิดความซับซ้อนและระยะเวลาของการรีเฟรชอย่างไร สำหรับการอ้างอิงด่วน ดูตารางต่อไปนี้

| โหมดการจัดเก็บข้อมูล | การรีเฟรชข้อมูล | การรีเฟรช OneDrive | การแคชของคิวรี | การรีเฟรชไทล์ | ภาพวิชวลรายงาน |
| --- | --- | --- | --- | --- | --- |
| นำเข้า | ตามกำหนดเวลาและตามคำขอ | ใช่ สำหรับชุดข้อมูลที่เชื่อมต่อ | ถ้าเปิดใช้งานบนความจุพรีเมียม | โดยอัตโนมัติ และตามคำขอ | ไม่ใช่ |
| DirectQuery | ไม่สามารถใช้งานได้ | ใช่ สำหรับชุดข้อมูลที่เชื่อมต่อ | ถ้าเปิดใช้งานบนความจุพรีเมียม | โดยอัตโนมัติ และตามคำขอ | ไม่ใช่ |
| LiveConnect | ไม่สามารถใช้งานได้ | ใช่ สำหรับชุดข้อมูลที่เชื่อมต่อ | ถ้าเปิดใช้งานบนความจุพรีเมียม | โดยอัตโนมัติ และตามคำขอ | ใช่ |
| ส่ง | ไม่สามารถใช้งานได้ | ไม่สามารถใช้งานได้ | ไม่ได้ผล | โดยอัตโนมัติ และตามคำขอ | ไม่ใช่ |
| | | | | | |

#### <a name="data-refresh"></a>การรีเฟรชข้อมูล

สำหรับผู้ใช้ Power BI โดยทั่วไปการรีเฟรชข้อมูลหมายถึงการนำเข้าข้อมูลจากแหล่งข้อมูลดั้งเดิมไปยังชุดข้อมูล ไม่ว่าจะตามกำหนดเวลาการรีเฟรชหรือตามคำขอ คุณสามารถทำการรีเฟรชชุดข้อมูลได้หลายชุดต่อวัน ซึ่งอาจจำเป็นถ้าข้อมูลจากแหล่งข้อมูลเปลี่ยนแปลงบ่อย Power BI จะจำกัดชุดข้อมูลบนความจุที่ใช้ร่วมกันสำหรับการรีเฟรชแปดรายการต่อวัน หากชุดข้อมูลนั้นอยู่ในความจุพรีเมียม คุณสามารถกำหนดตารางเวลาการรีเฟรชได้สูงสุด 48 รายการต่อวันในการตั้งค่าชุดข้อมูล สำหรับข้อมูลเพิ่มเติม โปรดดู [กำหนดค่าการรีเฟรชตามกำหนดการ](#configure-scheduled-refresh) ในบทความนี้ได้ในภายหลัง ชุดข้อมูลบนความจุแบบพรีเมียมที่มีการเปิดใช้งาน [ตำแหน่งข้อมูล XMLA](../admin/service-premium-connect-tools.md) สำหรับการอ่าน - เขียนจะสนับสนุนการดำเนินการรีเฟรชแบบไม่จำกัด เมื่อกำหนดค่าโดยทางโปรแกรมด้วย TMSL หรือ PowerShell

สิ่งสำคัญคือต้องกำหนดข้อจำกัดของความจุที่ใช้ร่วมกันสำหรับการรีเฟรชรายวันที่ใช้กับการรีเฟรชทั้งแบบกำหนดเวลาและ API รวมกัน คุณยังสามารถทริกเกอร์การรีเฟรชตามคำขอโดยการเลือก**รีเฟรชเดี๋ยวนี้**ในเมนูชุดข้อมูล ตามที่สกรีนช็อตต่อไปนี้แสดง การรีเฟรชตามความต้องการจะไม่รวมอยู่ในข้อจำกัดการรีเฟรช นอกจากนี้โปรดทราบว่าชุดข้อมูลบนความจุ Premium ไม่ได้กำหนดขีดจำกัดสำหรับการรีเฟรช API หากคุณมีความสนใจในการสร้างโซลูชันการรีเฟรชของคุณเองโดยใช้ Power BI REST API ดู[ชุดข้อมูล-รีเฟรช-ชุดข้อมูล](/rest/api/power-bi/datasets/refreshdataset)

![รีเฟรชเดี๋ยวนี้](media/refresh-data/refresh-now.png)

> [!NOTE]
> การรีเฟรชข้อมูลจะต้องดำเนินการให้แล้วเสร็จภายในเวลาไม่เกิน 2 ชั่วโมงบนความจุที่ใช้ร่วมกัน หากชุดข้อมูลของคุณต้องการการดำเนินการรีเฟรชที่นานขึ้น ให้ลองย้ายชุดข้อมูลไปยังความจุพรีเมียม ในความจุพรีเมียม ระยะเวลาการรีเฟรชสูงสุดคือ 5 ชั่วโมง

#### <a name="onedrive-refresh"></a>การรีเฟรช OneDrive

หากคุณสร้างชุดข้อมูลและรายงานตามไฟล์ Power BI Desktop, สมุดงาน Excel หรือไฟล์ค่าที่คั่นด้วยเครื่องหมายจุลภาค (.csv) บน OneDrive หรือ SharePoint Online, Power BI จะทำการรีเฟรชอีกประเภทหนึ่งเรียกว่าการรีเฟรช OneDrive สำหรับข้อมูลเพิ่มเติม ดู [รับข้อมูลจากไฟล์สำหรับ Power BI](service-get-data-from-files.md)

การรีเฟรช OneDrive จะซิงโครไนซ์ชุดข้อมูลและรายงานด้วยไฟล์แหล่งข้อมูล ซึ่งไม่เหมือนกับการรีเฟรชชุดข้อมูลในระหว่างที่ Power BI นำเข้าข้อมูลจากแหล่งข้อมูลไปยังชุดข้อมูล ตามค่าเริ่มต้น Power BI จะตรวจสอบทุก ๆ ชั่วโมงหากชุดข้อมูลที่เชื่อมต่อกับไฟล์ใน OneDrive หรือ SharePoint Online ต้องการการซิงโครไนซ์

Power BI ดำเนินการรีเฟรชตาม ID รายการใน OneDrive ดังนั้นโปรดไตร่ตรองให้ดีเมื่อพิจารณาระหว่างการอัปเดตและการแทนที่ เมื่อคุณตั้งค่าไฟล์ OneDrive เป็นแหล่งข้อมูล Power BI จะอ้างอิง ID รายการของไฟล์นั้นเมื่อทำการรีเฟรช พิจารณาสถานการณ์ต่อไปนี้: คุณมีไฟล์หลัก _A_ และสำเนาการผลิตของไฟล์นั้น _B_ และคุณได้กำหนดค่าการรีเฟรช OneDrive สำหรับไฟล์ B หากคุณ _คัดลอก_ ไฟล์ A บนไฟล์ B การดำเนินการคัดลอกจะลบไฟล์ B เก่าและสร้างไฟล์ B ใหม่ด้วย ID รายการอื่น ซึ่งทำให้การรีเฟรช OneDrive ล้มเหลว เพื่อหลีกเลี่ยงสถานการณ์ดังกล่าว คุณสามารถอัปโหลดและแทนที่ไฟล์ B ซึ่งจะเก็บ ID รายการเดิมของไฟล์ไว้

คุณสามารถย้ายไฟล์ไปยังตำแหน่งอื่น (โดยใช้การลากและวาง เป็นต้น) และการรีเฟรชจะทำงานต่อไปได้เพราะ Power BI ยังรู้จัก ID ของไฟล์ อย่างไรก็ตาม ถ้าคุณคัดลอกไฟล์นั้นไปยังตำแหน่งที่ตั้งอื่น อินสแตนซ์ใหม่ของไฟล์และ fileID ใหม่จะถูกสร้างขึ้น ดังนั้นการอ้างอิงไฟล์ Power BI ของคุณจะไม่สามารถใช้งานได้อีกต่อไปและการรีเฟรชจะล้มเหลว

> [!NOTE]
> Power BI ดฃอาจใช้เวลานานถึง 10 นาทีในการรีเฟรชชุดข้อมูล แม้เมื่อการซิงค์เสร็จสมบูรณ์ในเครื่องภายในของคุณและหลังจากที่คุณใช้ *รีเฟรชทันที* ในบริการของ Power BI ก็ตาม

หากต้องการตรวจสอบวงจรการซิงโครไนซ์ที่ผ่านมา ให้ตรวจสอบแท็บ OneDrive ในประวัติการรีเฟรช สกรีนช็อตต่อไปนี้แสดงวงจรการซิงโครไนซ์ที่เสร็จสมบูรณ์สำหรับชุดข้อมูลตัวอย่าง

![รีเฟรชประวัติ](media/refresh-data/refresh-history.png)

ตามสกรีนช็อตด้านบนที่แสดงไว้ Power BI จะระบุว่าการรีเฟรช OneDrive นี้เป็นการรีเฟรชแบบ**ตามกำหนดเวลา** แต่ไม่สามารถกำหนดค่าช่วงเวลารีเฟรช คุณสามารถปิดการรีเฟรช OneDrive ได้เฉพาะในการตั้งค่าของชุดข้อมูลเท่านั้น การปิดการรีเฟรชจะมีประโยชน์หากคุณไม่ต้องการให้ชุดข้อมูลและรายงานใน Power BI รับการเปลี่ยนแปลงใด ๆ จากไฟล์แหล่งข้อมูลโดยอัตโนมัติ

โปรดทราบว่าหน้าการตั้งค่าชุดข้อมูลจะแสดงส่วน**ข้อมูลประจำตัว OneDrive** และ **การรีเฟรช OneDrive** หากชุดข้อมูลนั้นเชื่อมต่อกับไฟล์ใน OneDrive หรือ SharePoint Online เช่นเดียวกับในสกรีนช็อตต่อไปนี้ ชุดข้อมูลที่ไม่ได้เชื่อมต่อกับไฟล์แหล่งข้อมูลใน OneDrive หรือ SharePoint Online จะไม่แสดงส่วนเหล่านี้

![ข้อมูลประจำตัว OneDrive และการรีเฟรช OneDrive](media/refresh-data/onedrive-credentials-refresh.png)

ถ้าคุณปิดใช้งานการรีเฟรช OneDrive สำหรับชุดข้อมูล คุณยังคงสามารถซิงโครไนซ์ชุดข้อมูลได้ตามคำขอโดยการเลือก**รีเฟรชเดี๋ยวนี้**ในเมนูชุดข้อมูล ในฐานะที่เป็นส่วนหนึ่งของการรีเฟรชตามคำขอ Power BI จะตรวจสอบว่าไฟล์แหล่งข้อมูลใน OneDrive หรือ SharePoint Online ใหม่กว่าชุดข้อมูลใน Power BI และซิงโครไนซ์ชุดข้อมูลหากเป็นกรณีนี้ **ประวัติการรีเฟรช** จะระบุรายการกิจกรรมเหล่านี้เป็นการรีเฟรชตามคำขอบนแท็บ **OneDrive**

โปรดทราบว่าการรีเฟรช OneDrive ไม่ดึงข้อมูลมาจากแหล่งข้อมูลต้นฉบับ การรีเฟรช OneDrive จะเพียงแค่อัปเดตทรัพยากรใน Power BI ด้วยเมตาดาต้า และข้อมูลจากไฟล์. pbix, .xlsx หรือ. csv ดังที่แผนภาพด้านล่างแสดง เพื่อให้แน่ใจว่าชุดข้อมูลมีข้อมูลล่าสุดจากแหล่งข้อมูล Power BI ยังทริกเกอร์การรีเฟรชข้อมูลโดยเป็นส่วนหนึ่งของการรีเฟรชตามคำขอ คุณสามารถตรวจสอบได้ใน**ประวัติการรีเฟรช**ถ้าคุณสลับไปแท็บ**ตามกำหนดเวลา**

![แผนภาพการรีเฟรช OneDrive](media/refresh-data/onedrive-refresh-diagram.png)

หากคุณยังคงเปิดใช้งานการรีเฟรช OneDrive สำหรับชุดข้อมูลที่เชื่อมต่อกับ OneDrive หรือ SharePoint Online และคุณต้องการทำการรีเฟรชข้อมูลตามกำหนดเวลา ตรวจสอบให้แน่ใจว่าคุณกำหนดค่ากำหนดเวลาเพื่อให้ Power BI ทำการรีเฟรชข้อมูลหลังจากการรีเฟรช OneDrive ตัวอย่างเช่น ถ้าคุณสร้างบริการหรือกระบวนการของคุณเองเพื่ออัปเดตไฟล์แหล่งข้อมูลใน OneDrive หรือ SharePoint Online ทุกคืนเวลา 1.00 น. คุณสามารถกำหนดค่าการรีเฟรชตามกำหนดเวลาเป็น 2:30 น. เพื่อให้ Power BI มีเวลาเพียงพอในการรีเฟรช OneDrive ให้แล้วเสร็จก่อนที่จะเริ่มต้นการรีเฟรชข้อมูล

#### <a name="refresh-of-query-caches"></a>การรีเฟรชของการแคชคิวรี

ถ้าชุดข้อมูลของคุณอยู่บนความจุพรีเมียม คุณอาจสามารถปรับปรุงประสิทธิภาพของแดชบอร์ดและรายงานที่เกี่ยวข้องใด ๆ โดยการเปิดใช้งานการแคชคิวรีตามสกรีนช็อตต่อไปนี้ การแคชคิวรีแนะนำความจุ Premium เพื่อใช้บริการการแคชในพื้นที่เพื่อรักษาผลลัพธ์คิวรี หลีกเลี่ยงแหล่งข้อมูลแฝงในการคำนวณผลลัพธ์เหล่านั้น สำหรับข้อมูลเพิ่มเติม ให้ดู [การแคชคิวรีใน Power BI Premium](power-bi-query-caching.md)

![การแคชคิวรี](media/refresh-data/query-caching.png)

อย่างไรก็ตามหลังจากการรีเฟรชข้อมูลแล้ว ผลการคิวรีที่แคชไว้ก่อนหน้านี้จะไม่สามารถใช้งานได้อีกต่อไป Power BI จะยกเลิกผลลัพธ์ที่แคชไว้เหล่านี้ และต้องสร้างผลลัพธ์ใหม่ ด้วยเหตุผลนี้ การแคชคิวรีอาจไม่เป็นประโยชน์ต่อรายงานและแดชบอร์ดที่เชื่อมโยงกับชุดข้อมูลที่คุณรีเฟรชบ่อย ๆ เช่น 48 ครั้งต่อวัน

#### <a name="tile-refresh"></a>การรีเฟรชไทล์

Power BI จะเก็บการแคชสำหรับภาพวิชวลของไทล์ทุกภาพบนแดชบอร์ดของคุณและอัปเดตการแคชไทล์เชิงรุกเมื่อข้อมูลเปลี่ยนแปลง กล่าวอีกนัยหนึ่ง การรีเฟรชไทล์เกิดขึ้นโดยอัตโนมัติหลังจากการรีเฟรชข้อมูล ซึ่งเป็นจริงสำหรับการดำเนินการรีเฟรชทั้งแบบตามกำหนดเวลาและตามคำขอ คุณยังสามารถบังคับใช้การรีเฟรชไทล์ได้โดยการเลือก **ตัวเลือกเพิ่มเติม** (...) ที่มุมบนขวาของแดชบอร์ดและเลือก **รีเฟรชไทล์แดชบอร์ด**

![การรีเฟรชชื่อแดชบอร์ด](media/refresh-data/refresh-dashboard-tiles.png)

เนื่องจากการรีเฟรชเกิดขึ้นโดยอัตโนมัติ คุณอาจถือว่าการรีเฟรชไทล์เป็นส่วนภายในของการรีเฟรชข้อมูล เหนือสิ่งอื่นใด คุณอาจสังเกตเห็นว่าระยะเวลาการรีเฟรชจะเพิ่มขึ้นตามจำนวนไทล์ ค่าใช้จ่ายในการรีเฟรชไทล์อาจมีความสำคัญ

ตามค่าเริ่มต้น Power BI จะเก็บแคชเดียวสำหรับทุกไทล์ แต่ถ้าคุณใช้การรักษาความปลอดภัยแบบไดนามิกเพื่อจำกัดการเข้าถึงข้อมูลตามบทบาทของผู้ใช้ตามที่กล่าวไว้ในบทความ [ความปลอดภัยระดับแถว (RLS) ด้วย Power BI](../admin/service-admin-rls.md) ดังนั้น Power BI ต้องเก็บแคชสำหรับทุกบทบาทและทุกไทล์ จำนวนแคชไทล์คูณด้วยจำนวนบทบาท

สถานการณ์อาจมีส่วนเกี่ยวข้องมากขึ้นถ้าชุดข้อมูลของคุณใช้การเชื่อมต่อแบบสดไปยังรูปแบบข้อมูล Analysis Services ที่มี RLS ตามที่เน้นไว้ในบทช่วยสอน [การรักษาความปลอดภัยระดับแถวแบบไดนามิกด้วยรูปแบบตารางบริการการวิเคราะห์](desktop-tutorial-row-level-security-onprem-ssas-tabular.md) ในสถานการณ์นี้ Power BI ต้องเก็บและรีเฟรชแคชสำหรับทุกไทล์และผู้ใช้ทุกคนที่เคยดูแดชบอร์ด ซึ่งไม่ใช่เรื่องแปลกที่ส่วนการรีเฟรชไทล์ของการดำเนินการรีเฟรชข้อมูลดังกล่าวจะเกินเวลาที่ใช้ในการดึงข้อมูลจากแหล่งข้อมูล สำหรับรายละเอียดเกี่ยวกับการรีเฟรชไทล์ ดู [การแก้ไขปัญหาข้อผิดพลาดของไทล์](refresh-troubleshooting-tile-errors.md)

#### <a name="refresh-of-report-visuals"></a>การรีเฟรชของภาพวิชวลรายงาน

กระบวนการรีเฟรชนี้มีความสำคัญน้อยเพราะจะเกี่ยวข้องเฉพาะการเชื่อมต่อแบบสดกับ Analysis Services เท่านั้น สำหรับการเชื่อมต่อเหล่านี้ Power BI จะแคชสถานะสุดท้ายของภาพวิชวลรายงานเพื่อที่ว่าเมื่อคุณดูรายงานอีกครั้ง Power BI ไม่จำเป็นต้องคิวรีรูปแบบตาราง Analysis Services เมื่อคุณโต้ตอบกับรายงานเช่น โดยการเปลี่ยนตัวกรองรายงาน Power BI คิวรีรูปแบบตารางและอัปเดตภาพวิชวลรายงานโดยอัตโนมัติ หากคุณสงสัยว่ารายงานกำลังแสดงข้อมูลเก่า คุณยังสามารถเลือกปุ่มรีเฟรชของรายงานเพื่อทริกเกอร์ภาพวิชวลรายงานทั้งหมดตามสกรีนช็อตต่อไปนี้แสดง

![รีเฟรชภาพวิชวลรายงาน](media/refresh-data/refresh-report-visuals.png)

## <a name="review-data-infrastructure-dependencies"></a>ตรวจสอบความเชื่อมโยงกันของโครงสร้างพื้นฐานของข้อมูล

การรีเฟรชข้อมูลจะไม่สามารถดำเนินการได้สำเร็จเว้นแต่ว่าแหล่งข้อมูลพื้นฐานนั้นจะสามารถเข้าถึงได้ โดยไม่คำนึงถึงโหมดการจัดเก็บข้อมูล มีสามสถานการณ์การเข้าถึงข้อมูลหลัก:

- ชุดข้อมูลใช้แหล่งข้อมูลที่อยู่ภายในองค์กร
- ชุดข้อมูลใช้แหล่งข้อมูลในระบบคลาวด์
- ชุดข้อมูลที่ใช้ข้อมูลจากแหล่งข้อมูลทั้งภายในองค์กรและระบบคลาวด์

### <a name="connecting-to-on-premises-data-sources"></a>การเชื่อมต่อกับแหล่งข้อมูลภายในองค์กร

หากชุดข้อมูลของคุณใช้แหล่งข้อมูลที่ Power BI ไม่สามารถเข้าถึงผ่านการเชื่อมต่อเครือข่ายโดยตรง คุณต้องกำหนดค่าการเชื่อมต่อเกตเวย์สำหรับชุดข้อมูลนี้ก่อนที่คุณจะสามารถเปิดใช้งานกำหนดตารางเวลาการรีเฟรชหรือทำการรีเฟรชข้อมูลตามคำขอ สำหรับข้อมูลเพิ่มเติมเกี่ยวกับเกตเวย์ข้อมูลและวิธีการทำงาน ดู[เกตเวย์ข้อมูลภายในองค์กรคืออะไร](service-gateway-onprem.md)

คุณมีตัวเลือกต่อไปนี้:

- เลือกเกตเวย์ข้อมูลองค์กรที่มีข้อกำหนดของแหล่งข้อมูลที่จำเป็น
- ปรับใช้เกตเวย์ข้อมูลส่วนบุคคล

> [!NOTE]
> คุณสามารถค้นหารายการของชนิดแหล่งข้อมูลที่จำเป็นต้องใช้เกตเวย์ข้อมูลในบทความ[จัดการแหล่งข้อมูล - นำเข้า/กำหนดตารางเวลาการรีเฟรช](service-gateway-enterprise-manage-scheduled-refresh.md)ได้

#### <a name="using-an-enterprise-data-gateway"></a>การใช้เกตเวย์ข้อมูลองค์กร

Microsoft แนะนำให้ใช้เกตเวย์ข้อมูลองค์กรแทนเกตเวย์ส่วนบุคคลเพื่อเชื่อมต่อชุดข้อมูลกับแหล่งข้อมูลภายในองค์กร ตรวจสอบให้แน่ใจว่าเกตเวย์ได้รับการกำหนดค่าอย่างเหมาะสมซึ่งหมายความว่าเกตเวย์จะต้องมีการอัปเดตล่าสุดและข้อกำหนดของแหล่งข้อมูลที่จำเป็นทั้งหมด ข้อกำหนดของแหล่งข้อมูลช่วยให้ Power BI มีข้อมูลการเชื่อมต่อสำหรับแหล่งข้อมูลที่กำหนด รวมถึงจุดเชื่อมต่อ โหมดการรับรองความถูกต้อง และข้อมูลประจำตัว สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการจัดการแหล่งข้อมูลบนเกตเวย์ ดู[จัดการแหล่งข้อมูลของคุณ - นำเข้า/กำหนดตารางเวลาการรีเฟรช](service-gateway-enterprise-manage-scheduled-refresh.md)

การเชื่อมต่อชุดข้อมูลกับเกตเวย์องค์กรนั้นค่อนข้างตรงไปตรงมาหากคุณเป็นผู้ดูแลระบบเกตเวย์ ด้วยสิทธิของผู้ดูแลระบบ คุณสามารถอัปเดตเกตเวย์และเพิ่มแหล่งข้อมูลที่หายไปทันทีหากจำเป็น ในความเป็นจริง คุณสามารถเพิ่มแหล่งข้อมูลที่ขาดหายไปยังเกตเวย์ของคุณได้โดยตรงจากหน้าการตั้งค่าชุดข้อมูล ขยายปุ่มสลับเพื่อดูแหล่งข้อมูลและเลือกลิงก์ **เพิ่มลงในเกตเวย์** ตามสกรีนช็อตต่อไปนี้ ถ้าคุณไม่ใช่ผู้ดูแลระบบเกตเวย์ ในทางกลับกันคุณจะต้องติดต่อผู้ดูแลระบบเกตเวย์เพื่อเพิ่มข้อกำหนดแหล่งข้อมูลที่จำเป็น

> [!NOTE]
> เฉพาะผู้ดูแลระบบเกตเวย์เท่านั้นที่สามารถเพิ่มแหล่งข้อมูลลงในเกตเวย์ได้ นอกจากนี้ยังต้องตรวจสอบให้แน่ใจว่าผู้ดูแลระบบเกตเวย์ได้เพิ่มบัญชีผู้ใช้ของคุณไปยังรายชื่อผู้ใช้ที่มีสิทธิ์ในการใช้แหล่งข้อมูล หน้าการตั้งค่าชุดข้อมูลช่วยให้คุณเลือกเกตเวย์ขององค์กรที่มีแหล่งข้อมูลที่ตรงกันที่คุณมีสิทธิ์ในการใช้เท่านั้น

![เพิ่มลงในเกตเวย์](media/refresh-data/add-to-gateway.png)

ตรวจสอบให้แน่ใจว่าคุณแมปข้อกำหนดแหล่งข้อมูลที่ถูกต้องไปยังแหล่งข้อมูลของคุณ ตามที่แสดงในสกรีนช็อตด้านบน ผู้ดูแลระบบเกตเวย์สามารถสร้างข้อกำหนดหลายรายการบนเกตเวย์เดียวที่เชื่อมต่อกับแหล่งข้อมูลเดียวด้วยข้อมูลประจำตัวที่ต่างกัน ในตัวอย่างที่แสดง เจ้าของชุดข้อมูลในฝ่ายขายต้องเลือกข้อกำหนดแหล่งข้อมูล AdventureWorksProducts-Sales ขณะที่เจ้าของชุดข้อมูลในฝ่ายสนับสนุนจะแมปชุดข้อมูลไปยังข้อกำหนดแหล่งข้อมูล AdventureWorksProducts-Support ถ้าชื่อของข้อกำหนดแหล่งข้อมูลใช้งานไม่ได้ โปรดติดต่อผู้ดูแลระบบเกตเวย์ของคุณเพื่อขยายความข้อกำหนดที่จะเลือกให้ชัดเจน

> [!NOTE]
> ชุดข้อมูลสามารถใช้การเชื่อมต่อเกตเวย์เดียวเท่านั้น กล่าวอีกนัยหนึ่ง เป็นไปไม่ได้ที่จะเข้าถึงแหล่งข้อมูลภายในองค์กรผ่านการเชื่อมต่อหลายเกตเวย์ ดังนั้นคุณต้องเพิ่มข้อกำหนดของแหล่งข้อมูลที่จำเป็นทั้งหมดไปยังเกตเวย์เดียวกัน

#### <a name="deploying-a-personal-data-gateway"></a>การปรับใช้เกตเวย์ข้อมูลส่วนบุคคล

หากคุณไม่สามารถเข้าถึงเกตเวย์ข้อมูลองค์กรและคุณเป็นคนเดียวที่จัดการชุดข้อมูล ดังนั้นคุณไม่จำเป็นต้องแชร์แหล่งข้อมูลกับผู้อื่น คุณสามารถปรับใช้เกตเวย์ข้อมูลในโหมดส่วนตัวได้ ในส่วน **การเชื่อมต่อเกตเวย์** ภายใต้ **คุณยังไม่ได้ติดตั้งเกตเวย์ส่วนบุคคล** เลือก **ติดตั้งทันที** เกตเวย์ข้อมูลส่วนบุคคลมีข้อจำกัดหลายตามที่ระบุไว้ใน[เกตเวย์ข้อมูลภายในองค์กร (โหมดส่วนบุคคล)](service-gateway-personal-mode.md)

คุณไม่จำเป็นต้องเพิ่มข้อกำหนดของแหล่งข้อมูลในเกตเวย์ส่วนบุคคล ซึ่งไม่เหมือนกับสำหรับเกตเวย์ข้อมูลองค์กร แต่คุณสามารถจัดการการกำหนดค่าแหล่งข้อมูลโดยใช้ส่วน **ข้อมูลประจำตัวของแหล่งข้อมูล** ในการตั้งค่าชุดข้อมูลตามสกรีนช็อตต่อไปนี้แสดง

![กำหนดค่าข้อมูลประจำตัวของแหล่งข้อมูลสำหรับเกตเวย์](media/refresh-data/configure-data-source-credentials-gateway.png)

> [!NOTE]
> เกตเวย์ข้อมูลส่วนบุคคลไม่สนับสนุนชุดข้อมูลในโหมด DirectQuery/LiveConnect หน้าการตั้งค่าชุดข้อมูลอาจแจ้งให้คุณติดตั้ง แต่ถ้าคุณมีแค่เพียงเกตเวย์ส่วนบุคคลเท่านั้น คุณจะไม่สามารถกำหนดค่าการเชื่อมต่อเกตเวย์ได้ ตรวจสอบให้แน่ใจว่าคุณมีเกตเวย์ข้อมูลองค์กรเพื่อสนับสนุนชุดข้อมูลชนิดเหล่านี้

### <a name="accessing-cloud-data-sources"></a>การเข้าถึงแหล่งข้อมูลบนระบบคลาวด์

ชุดข้อมูลที่ใช้แหล่งข้อมูลบนระบบคลาวด์เช่น Azure SQL DB ไม่จำเป็นต้องมีเกตเวย์ข้อมูลถ้า Power BI สามารถสร้างการเชื่อมต่อเครือข่ายโดยตรงไปยังแหล่งข้อมูล ดังนั้นคุณสามารถจัดการการกำหนดค่าแหล่งข้อมูลเหล่านี้โดยใช้ส่วน**ข้อมูลประจำตัวของแหล่งข้อมูล** ในการตั้งค่าชุดข้อมูล ตามสกรีนช็อตต่อไปนี้แสดง คุณไม่จำเป็นต้องกำหนดค่าการเชื่อมต่อเกตเวย์

![กำหนดค่าข้อมูลประจำตัวของแหล่งข้อมูลโดยไม่มีเกตเวย์](media/refresh-data/configure-data-source-credentials.png)

### <a name="accessing-on-premises-and-cloud-sources-in-the-same-source-query"></a>การเข้าถึงแหล่งข้อมูลภายในองค์กรและระบบคลาวด์ในคิวรีแหล่งข้อมูลเดียวกัน

ชุดข้อมูลสามารถรับข้อมูลจากหลายแหล่งข้อมูล และแหล่งข้อมูลเหล่านี้สามารถอยู่ภายในองค์กรหรือในระบบคลาวด์ ชุดข้อมูลสามารถใช้การเชื่อมต่อเกตเวย์เดียวเท่านั้นตามที่กล่าวถึงก่อนหน้านี้ ในขณะที่แหล่งข้อมูลบนคลาวด์ไม่จำเป็นต้องมีเกตเวย์ แต่จำเป็นต้องใช้เกตเวย์หากชุดข้อมูลเชื่อมต่อกับทั้งแหล่งข้อมูลภายในองค์กรและระบบคลาวด์ในการคิวรี Mashup เดียว ในสถานการณ์นี้ Power BI ต้องใช้เกตเวย์สำหรับแหล่งข้อมูลบนระะบบคลาวด์ด้วยเช่นกัน แผนภาพต่อไปนี้แสดงให้เห็นว่าชุดข้อมูลดังกล่าวเข้าถึงแหล่งข้อมูลได้อย่างไร

![แหล่งข้อมูลภายในองค์กรและระบบคลาวด์](media/refresh-data/cloud-on-premises-data-sources-diagram.png)

> [!NOTE]
> หากชุดข้อมูลใช้คิวรี Mashup ที่แยกต่างหากเพื่อเชื่อมต่อกับแหล่งข้อมูลภายในองค์กรและระบบคลาวด์ Power BI ใช้การเชื่อมต่อเกตเวย์เพื่อเข้าถึงแหล่งข้อมูลภายในองค์กรและการเชื่อมต่อเครือข่ายโดยตรงกับแหล่งข้อมูลบนระบบคลาวด์ ถ้าคิวรี Mashup ผสานหรือผนวกข้อมูลจากแหล่งข้อมูลภายในองค์กรและระบบคลาวด์ Power BI จะเปลี่ยนเป็นการเชื่อมต่อเกตเวย์แม้กระทั่งกับแหล่งข้อมูลบนระบบคลาวด์

ชุดข้อมูล Power BI ต้องใช้ Power Query เพื่อเข้าถึงและดึงข้อมูลจากแหล่งข้อมูล รายการ Mashup ต่อไปนี้แสดงตัวอย่างพื้นฐานของคิวรีที่ผสานข้อมูลจากแหล่งข้อมูลภายในองค์กรและแหล่งข้อมูลบนระบบคลาวด์

```
Let

    OnPremSource = Sql.Database("on-premises-db", "AdventureWorks"),

    CloudSource = Sql.Databases("cloudsql.database.windows.net", "AdventureWorks"),

    TableData1 = OnPremSource{[Schema="Sales",Item="Customer"]}[Data],

    TableData2 = CloudSource {[Schema="Sales",Item="Customer"]}[Data],

    MergedData = Table.NestedJoin(TableData1, {"BusinessEntityID"}, TableData2, {"BusinessEntityID"}, "MergedData", JoinKind.Inner)

in

    MergedData
```

มีสองตัวเลือกการกำหนดค่าเกตเวย์ข้อมูลเพื่อสนับสนุนการผสานหรือการผนวกข้อมูลจากแหล่งข้อมูลภายในองค์กรและแหล่งข้อมูลบนระบบคลาวด์:

- เพิ่มข้อกำหนดของแหล่งข้อมูลสำหรับแหล่งข้อมูลบนระบบคลาวด์ไปยังเกตเวย์ข้อมูล นอกเหนือจากแหล่งข้อมูลภายในองค์กร
- เปิดใช้งานกล่องกาเครื่อง **อนุญาตให้ทำการรีเฟรชแหล่งข้อมูลบนระบบคลาวด์ของผู้ใช้ผ่านคลัสเตอร์เกตเวย์นี้**

![รีเฟรชผ่านคลัสเตอร์เกตเวย์](media/refresh-data/refresh-gateway-cluster.png)

ถ้าคุณเปิดใช้งานกล่องกาเครื่องหมาย **อนุญาตให้ทำการรีเฟรชแหล่งข้อมูลบนระบบคลาวด์ของผู้ใช้ผ่านคลัสเตอร์เกตเวย์นี้ในการกำหนดค่าเกตเวย์** ตามในสกรีนช็อตด้านบน Power BI สามารถใช้การกำหนดค่าที่ผู้ใช้กำหนดสำหรับแหล่งข้อมูลบนระบบคลาวด์ภายใต้ **ข้อมูลประจำตัวของแหล่งข้อมูล** ในการตั้งค่าชุดข้อมูล ซึ่งสามารถช่วยลดค่าใช้จ่ายในการกำหนดค่าเกตเวย์ ในทางกลับกัน หากคุณต้องการควบคุมการเชื่อมต่อที่เกตเวย์ของคุณกำหนดมากขึ้น คุณไม่ควรเปิดใช้งานกล่องกาเครื่องหมายนี้ ในกรณีนี้ คุณต้องเพิ่มข้อกำหนดของแหล่งข้อมูลที่ชัดเจนสำหรับทุกแหล่งข้อมูลบนระบบคลาวด์ที่คุณต้องการสนับสนุนในเกตเวย์ของคุณ นอกจากนี้ยังเป็นไปได้ที่จะเปิดใช้งานกล่องกาเครื่องหมาย และเพิ่มข้อกำหนดของแหล่งข้อมูลที่ชัดเจนสำหรับแหล่งข้อมูลบนระบบคลาวด์ของคุณในเกตเวย์ ในกรณีนี้ เกตเวย์ใช้ข้อกำหนดของแหล่งข้อมูลสำหรับแหล่งข้อมูลที่ตรงกันทั้งหมด

### <a name="configuring-query-parameters"></a>การกำหนดค่าพารามิเตอร์คิวรี

คิวรี Mashup หรือ M ที่คุณสร้างโดยใช้ Power Query อาจแตกต่างกันในความซับซ้อนจากขั้นตอนเล็กน้อยไปจนถึงโครงสร้างแบบพารามิเตอร์ รายการต่อไปนี้แสดงคิวรี Mashup ตัวอย่างขนาดเล็กที่ใช้พารามิเตอร์สองอย่างที่เรียกว่า _SchemaName_ และ _TableName_ เพื่อเข้าถึงตารางที่กำหนดไว้ในฐานข้อมูล AdventureWorks

```
let

    Source = Sql.Database("SqlServer01", "AdventureWorks"),

    TableData = Source{[Schema=SchemaName,Item=TableName]}[Data]

in

    TableData
```

> [!NOTE]
> เฉพาะพารามิเตอร์คิวรีเท่านั้นที่ได้รับการสนับสนุนสำหรับชุดข้อมูลของโหมดการนำเข้า โหมด DirectQuery/LiveConnect ไม่สนับสนุนข้อกำหนดของพารามิเตอร์คิวรี

เพื่อให้แน่ใจว่าชุดข้อมูลที่มีพารามิเตอร์เข้าถึงข้อมูลที่ถูกต้อง คุณต้องกำหนดค่าพารามิเตอร์คิวรี Mashup ในการตั้งค่าชุดข้อมูล คุณยังสามารถอัปเดตพารามิเตอร์ทางโปรแกรมได้โดยใช้ [Power BI REST API](/rest/api/power-bi/datasets/updateparametersingroup) สกรีนช็อตต่อไปนี้แสดงอินเทอร์เฟสผู้ใช้เพื่อกำหนดค่าพารามิเตอร์คิวรีสำหรับชุดข้อมูลที่ใช้คิวรี Mashup ข้างต้น

![กำหนดค่าพารามิเตอร์คิวรี](media/refresh-data/configure-query-parameters.png)




## <a name="refresh-and-dynamic-data-sources"></a>รีเฟรชและแหล่งข้อมูลแบบไดนามิก
 
*แหล่งข้อมูลแบบไดนามิก* เป็นแหล่งข้อมูลที่ซึ่งไม่สามารถระบุข้อมูลบางส่วน หรือข้อมูลทั้งหมดที่จำเป็นในการเชื่อมต่อได้จนกว่า Power Query จะเรียกใช้คิวรี เนื่องจากข้อมูลถูกสร้างขึ้นในรูปแบบโค้ด หรือถูกส่งกลับมาจากแหล่งข้อมูลอื่น ตัวอย่างได้แก่: ชื่ออินสแตนซ์และฐานข้อมูลของ SQL Server database เส้นทางของไฟล์ CSV หรือ URL ของบริการเว็บ 
 
ในกรณีส่วนใหญ่ชุดข้อมูล Power BI ที่ใช้แหล่งข้อมูลแบบไดนามิกไม่สามารถรีเฟรชในบริการของ Power BI ได้ มีข้อยกเว้นบางอย่างที่สามารถรีเฟรชแหล่งข้อมูลแบบไดนามิกในบริการของ Power BI ได้ เช่น เมื่อใช้ตัวเลือก RelativePath และ Query กับฟังก์ชัน Web.Contents M คิวรีที่อ้างอิงพารามิเตอร์ Power Query ยังสามารถรีเฟรชได้
 
เพื่อตรวจสอบว่าแหล่งข้อมูลแบบไดนามิกของคุณสามารถรีเฟรชได้หรือไม่ ให้เปิดกล่องโต้ตอบ **การตั้งค่าแหล่งข้อมูล** ใน **Power Query Editor** จากนั้นเลือก **แหล่งข้อมูลในไฟล์ปัจจุบัน** ในหน้าต่างที่ปรากฏขึ้น ให้ค้นหาข้อความเตือนดังต่อไปนี้ดังที่แสดงในรูปต่อไปนี้:
 
    Some data sources may not be listed because of hand-authored queries.

![ตัวบ่งชี้แหล่งข้อมูลแบบไดนามิก](media/refresh-data/dynamic-data-source.png)

ถ้ามีการแจ้งเตือนนั้นอยู่ในกล่องโต้ตอบ **การตั้งค่าแหล่งข้อมูล** ที่ได้ปรากฏขึ้น จากนั้นแหล่งข้อมูลแบบไดนามิกที่ไม่สามารถรีเฟรชได้ในบริการของ Power BI จะปรากฏขึ้น

## <a name="configure-scheduled-refresh"></a>กำหนดค่าการรีเฟรชตามกำหนดเวลา

การสร้างการเชื่อมต่อระหว่าง Power BI และแหล่งข้อมูลของคุณเป็นงานที่ท้าทายที่สุดในการกำหนดค่าการรีเฟรชข้อมูล ขั้นตอนที่เหลือนั้นค่อนข้างตรงไปตรงมา และรวมถึงการตั้งค่ากำหนดตารางเวลาการรีเฟรชและการเปิดใช้งานการแจ้งเตือนความล้มเหลวในการรีเฟรช สำหรับคำแนะนำทีละขั้นตอน ดูคู่มือวิธี [การกำหนดค่าการรีเฟรชตามกำหนดเวลา](refresh-scheduled-refresh.md)

### <a name="setting-a-refresh-schedule"></a>การตั้งค่ากำหนดตารางเวลาการรีเฟรช

คุณสามารถกำหนดความถี่ที่และช่วงเวลาเพื่อรีเฟรชชุดข้อมูลได้ที่ส่วน **การรีเฟรชตามกำหนดเวลา** ตามที่ระบุไว้ก่อนหน้านี้ คุณสามารถกำหนดค่าช่วงเวลาการรีเฟรชสูงสุดแปดครั้งต่อวันหากชุดข้อมูลของคุณอยู่ในความจุที่ใช้ร่วมกันหรือ 48 ครั้งต่อวันสำหรับ Power BI Premium สกรีนช็อตต่อไปนี้แสดงตารางการรีเฟรชในช่วงเวลาสิบสองชั่วโมง

![กำหนดค่าการรีเฟรชตามกำหนดเวลา](media/refresh-data/configure-scheduled-refresh.png)

หลังจากกำหนดตารางการรีเฟรช หน้าการตั้งค่าชุดข้อมูลจะแจ้งให้คุณทราบเกี่ยวกับเวลาการรีเฟรชครั้งถัดไปเช่นเดียวกับในสกรีนช็อตข้างต้น หากคุณต้องการรีเฟรชข้อมูลเร็วขึ้นเช่น เพื่อทดสอบเกตเวย์และการกำหนดค่าแหล่งข้อมูลของคุณ ให้ทำการรีเฟรชตามคำขอโดยใช้ตัวเลือก **รีเฟรชเดี๋ยวนี้** ในเมนูชุดข้อมูลในบานหน้าต่างนำทาง การรีเฟรชตามความต้องการจะไม่ส่งผลกระทบต่อเวลาการรีเฟรชที่กำหนดไว้ครั้งถัดไป

โปรดทราบว่าเวลาการรีเฟรชที่กำหนดค่าไว้อาจไม่ใช่เวลาที่แน่นอนเมื่อ Power BI เริ่มกระบวนการตามกำหนดเวลาครั้งถัดไป Power BI เริ่มต้นการรีเฟรชตามกำหนดเวลาโดยใช้ความพยายามอย่างดีที่สุด เป้าหมายคือการเริ่มต้นการรีเฟรชภายใน 15 นาทีของช่วงเวลาที่กำหนดไว้ แต่อาจเกิดความล่าช้าได้ถึงหนึ่งชั่วโมงหากบริการไม่สามารถจัดสรรทรัพยากรที่ต้องการได้เร็วขึ้น

> [!NOTE]
> Power BI จะปิดใช้งานกำหนดการรีเฟรชของคุณหลังจากเกิดความล้มเหลวติดต่อกันสี่ครั้ง หรือเมื่อบริการตรวจพบข้อผิดพลาดที่ไม่สามารถกู้คืนได้ซึ่งต้องมีการอัปเดตการกำหนดค่าเช่น ข้อมูลประจำตัวที่ไม่ถูกต้องหรือหมดอายุ ไม่สามารถเปลี่ยนค่าเกณฑ์ของความล้มเหลวติดต่อ

### <a name="getting-refresh-failure-notifications"></a>การรับข้อมูลการแจ้งเตือนความล้มเหลวในการรีเฟรช

ตามค่าเริ่มต้น Power BI ส่งการแจ้งเตือนความล้มเหลวในการรีเฟรชผ่านอีเมลไปยังเจ้าของชุดข้อมูลเพื่อให้เจ้าของสามารถดำเนินการได้ในเวลาที่เหมาะสมหากมีปัญหาในการรีเฟรช Power BI ยังส่งการแจ้งเตือนเมื่อบริการปิดใช้งานกำหนดการของคุณเนื่องจากความล้มเหลวติดต่อ Microsoft แนะนำให้คุณยกเลิกการเปิดใช้งานกล่องกาเครื่องหมาย **ส่งการแจ้งเตือนความล้มเหลวในการรีเฟรชผ่านอีเมลแจ้งเตือนให้ฉัน**

นอกจากนี้ยังเป็นความคิดที่ดีในการระบุผู้รับเพิ่มเติมโดยใช้กล่องข้อความ **ส่งอีเมลไปยังผู้ใช้เหล่านี้เมื่อการรีเฟรชล้มเหลว** ผู้รับที่ระบุจะได้รับการแจ้งเตือนความล้มเหลวในการรีเฟรชนอกเหนือจากเจ้าของชุดข้อมูล ซึ่งอาจเป็นเพื่อนร่วมงานที่ดูแลชุดข้อมูลของคุณในขณะที่คุณหยุดพักผ่อน นอกจากนี้ยังอาจเป็นนามแฝงอีเมลของทีมสนับสนุนที่ดูแลปัญหาการรีเฟรชสำหรับแผนกหรือองค์กรของคุณ การส่งการแจ้งเตือนความล้มเหลวของการรีเฟรชให้กับผู้อื่นนอกเหนือจากเจ้าของชุดข้อมูลจะเป็นประโยชน์เพื่อให้แน่ใจว่าปัญหาเป็นที่รับทราบและได้รับการแก้ไขในลักษณะที่เหมาะสม

โปรดทราบว่า Power BI ไม่เพียงแต่ส่งการแจ้งเตือนเกี่ยวกับความล้มเหลวในการรีเฟรช แต่ยังรวมถึงเมื่อบริการหยุดการรีเฟรชตามกำหนดชั่วคราวเนื่องจากไม่มีการใช้งาน หลังจากสองเดือนเมื่อไม่มีผู้ใช้เข้าชมแดชบอร์ดหรือรายงานใด ๆ ที่สร้างขึ้นบนชุดข้อมูล Power BI จะถือว่าชุดข้อมูลนั้นไม่ได้ใช้งาน ในสถานการณ์นี้ Power BI ส่งข้อความอีเมลไปยังเจ้าของชุดข้อมูลที่ระบุว่าบริการได้หยุดกำหนดการรีเฟรชสำหรับชุดข้อมูลชั่วคราวแล้ว ดูสกรีนช็อตต่อไปนี้สำหรับตัวอย่างของการแจ้งเตือนดังกล่าว

![อีเมลสำหรับการรีเฟรชหยุดชั่วคราว](media/refresh-data/email-paused-refresh.png)

หากต้องการดำเนินการรีเฟรชตามกำหนดเวลาต่อ ไปยังรายงานหรือแดชบอร์ดที่สร้างขึ้นโดยใช้ชุดข้อมูลนี้หรือด้วยตนเอง รีเฟรชชุดข้อมูลโดยใช้ตัวเลือก **รีเฟรชเดี๋ยวนี้**

### <a name="checking-refresh-status-and-history"></a>การตรวจสอบสถานะและประวัติการรีเฟรช

นอกเหนือจากการแจ้งเตือนความล้มเหลว คุณควรตรวจสอบชุดข้อมูลของคุณเป็นระยะเพื่อหาข้อผิดพลาดในการรีเฟรช วิธีที่รวดเร็วคือดูรายการชุดข้อมูลในพื้นที่ทำงาน ชุดข้อมูลที่มีข้อผิดพลาดจะแสดงไอคอนคำเตือนขนาดเล็ก เลือกไอคอนคำเตือนเพื่อรับข้อมูลเพิ่มเติมตามสกรีนช็อตต่อไปนี้ สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการแก้ไขปัญหาข้อผิดพลาดในการรีเฟรชที่เฉพาะเจาะจง โปรดดู [การแก้ไขปัญหาสถานการณ์การรีเฟรช](refresh-troubleshooting-refresh-scenarios.md)

![คำเตือนสถานะการรีเฟรช](media/refresh-data/refresh-status-warning.png)

ไอคอนคำเตือนช่วยระบุปัญหาของชุดข้อมูลปัจจุบัน แต่ยังควรตรวจสอบประวัติการรีเฟรชในบางครั้ง ตามที่ชื่อบอกไว ้ประวัติการรีเฟรชช่วยให้คุณสามารถตรวจสอบสถานะความสำเร็จหรือความล้มเหลวของวงจรการซิงโครไนซ์ที่ผ่านมา ตัวอย่างเช่น ผู้ดูแลระบบเกตเวย์อาจอัปเดตชุดข้อมูลประจำตัวของฐานข้อมูลที่หมดอายุแล้ว ตามที่คุณเห็นในสกรีนช็อตต่อไปนี้ ประวัติการรีเฟรชจะแสดงเมื่อการรีเฟรชที่ได้รับผลกระทบเริ่มต้นทำงานอีกครั้ง

![ข้อความประวัติการรีเฟรช](media/refresh-data/refresh-history-messages.png)

> [!NOTE]
> คุณสามารถค้นหาลิงก์เพื่อแสดงประวัติการรีเฟรชในการตั้งค่าชุดข้อมูล นอกจากนี้ คุณยังสามารถดึงข้อมูลประวัติการรีเฟรชทางโปรแกรมโดยใช้ [Power BI REST API](/rest/api/power-bi/datasets/getrefreshhistoryingroup) ด้วยการใช้โซลูชันที่กำหนดเอง คุณสามารถตรวจสอบประวัติการรีเฟรชของชุดข้อมูลหลายชุดในลักษณะรวมศูนย์

## <a name="automatic-page-refresh"></a>การรีเฟรชเพจอัตโนมัติ

การรีเฟรชหน้าอัตโนมัติทำงานอยู่ในระดับหน้ารายงานและอนุญาตให้ผู้สร้างรายงานตั้งค่าช่วงเวลาการรีเฟรชสำหรับวิชวลในหน้าซึ่งจะใช้งานได้เฉพาะเมื่อมีการใช้งานเพจ การรีเฟรชหน้าอัตโนมัติสามารถใช้ได้เฉพาะแหล่งข้อมูล DirectQuery เท่านั้น ช่วงการรีเฟรชต่ำสุดขึ้นอยู่กับชนิดของพื้นที่ทำงานที่มีการเผยแพร่รายงาน และการตั้งค่าผู้ดูแลระบบของความจุสำหรับพื้นที่ทำงานแบบพรีเมียม และ [ฝังเข้าไปใน](../developer/embedded/embedding.md)

เรียนรู้เพิ่มเติมเกี่ยวกับการรีเฟรชหน้าอัตโนมัติในบทความ [การรีเฟรชเพจอัตโนมัติ ](../create-reports/desktop-automatic-page-refresh.md)

## <a name="best-practices"></a>แนวทางปฏิบัติที่ดีที่สุด

การตรวจสอบประวัติการรีเฟรชของชุดข้อมูลเป็นประจำเป็นหนึ่งในแนวทางปฏิบัติที่ดีที่สุดที่สำคัญที่สุดที่คุณสามารถนำมาใช้เพื่อให้แน่ใจว่ารายงานและแดชบอร์ดของคุณใช้ข้อมูลปัจจุบัน หากคุณพบปัญหา ให้จัดการปัญหาทันทีและติดตามกับเจ้าของแหล่งข้อมูลและผู้ดูแลระบบเกตเวย์หากจำเป็น

นอกจากนี้ ให้พิจารณาคำแนะนำต่อไปนี้เพื่อสร้างและรักษากระบวนการรีเฟรชข้อมูลที่เชื่อถือได้สำหรับชุดข้อมูล:

- กำหนดเวลาการรีเฟรชสำหรับเวลาที่ยุ่งน้อยลงโดยเฉพาะถ้าชุดข้อมูลอยู่ใน Power BI Premium หากคุณกระจายวงจรการรีเฟรชสำหรับชุดข้อมูลไปยังช่วงเวลาที่กว้างขึ้น คุณสามารถช่วยหลีกเลี่ยงจุดสูงสุดที่อาจทำให้มีทรัพยากรมากเกินไป ความล่าช้าในการเริ่มต้นวงจรการรีเฟรชเป็นตัวบ่งชี้การใช้ทรัพยากรเกิน หากความจุพรีเมียมหมดลงอย่างสมบูรณ์ Power BI อาจข้ามวงจรการรีเฟรช
- คำนึงถึงขีดจำกัดการรีเฟรช หากข้อมูลจากแหล่งข้อมูลมีการเปลี่ยนแปลงบ่อยหรือปริมาณข้อมูลค่อนข้างมาก ให้พิจารณาใช้โหมด DirectQuery/LiveConnect แทนโหมดการนำเข้าหากโหลดที่เพิ่มที่แหล่งข้อมูลและผลกระทบต่อประสิทธิภาพการคิวรีสามารถยอมรับได้ หลีกเลี่ยงการรีเฟรชชุดข้อมูลโหมดการนำเข้าอย่างต่อเนื่อง อย่างไรก็ตามโหมด DirectQuery/LiveConnect มีข้อจำกัดหลายประการเช่น ข้อจำกัดหนึ่งล้านแถวสำหรับการส่งคืนข้อมูลและการ จำกัดเวลาตอบสนอง 225 วินาทีสำหรับการเรียกใช้คิวรีตามที่ระบุไว้ใน [ใช้ DirectQuery ใน Power BI Desktop](desktop-use-directquery.md) อย่างไรก็ตาม ข้อจำกัดเหล่านี้ต้องการให้คุณใช้โหมดการนำเข้า สำหรับปริมาณข้อมูลขนาดใหญ่มาก ให้พิจารณาการใช้[การรวมใน Power BI](../transform-model/desktop-aggregations.md)
- ตรวจสอบว่าเวลาการรีเฟรชชุดข้อมูลของคุณเกินระยะเวลาการรีเฟรชสูงสุด ใช้ Power BI Desktop เพื่อตรวจสอบระยะเวลาการรีเฟรช ถ้าจะใช้เวลามากกว่า 2 ชั่วโมง ให้พิจารณาย้ายชุดข้อมูลของคุณไปยัง Power BI Premium ชุดข้อมูลของคุณอาจไม่สามารถรีเฟรชได้บนความจุที่ใช้ร่วมกัน นอกจากนี้ให้ลองใช้ [การรีเฟรชแบบเพิ่มทีละหน่วยใน Power BI Premium ](../admin/service-premium-incremental-refresh.md) สำหรับชุดข้อมูลที่มีขนาดใหญ่กว่า 1GB หรือใช้เวลาหลายชั่วโมงในการรีเฟรช
- ปรับชุดข้อมูลให้เหมาะสมเพื่อรวมเฉพาะตารางและคอลัมน์ที่รายงานและแดชบอร์ดของคุณใช้เท่านั้น ปรับคิวรี Mashup ให้เหมาะสม และถ้าเป็นไปได้ ให้หลีกเลี่ยงข้อกำหนดของแหล่งข้อมูลแบบไดนามิกและการคำนวณ DAX ราคาแพง หลีกเลี่ยงฟังก์ชัน DAX ที่ทดสอบทุก ๆ แถวในตารางโดยเฉพาะเนื่องจากการใช้หน่วยความจำสูงและค่าใช้จ่ายในการประมวลผล
- ใช้การตั้งค่าความเป็นส่วนตัวเหมือนกันใน Power BI Desktop เพื่อให้แน่ใจว่า Power BI สามารถสร้างคิวรีแหล่งข้อมูลที่มีประสิทธิภาพ โปรดทราบว่า Power BI Desktop ไม่เผยแพร่การตั้งค่าความเป็นส่วนตัว คุณต้องนำการตั้งค่าไปใช้ใหม่ในข้อกำหนดของแหล่งข้อมูลด้วยตนเองหลังจากเผยแพร่ชุดข้อมูลของคุณ
- จำกัดจำนวนของภาพวิชวลบนแดชบอร์ดของคุณโดยเฉพาะอย่างยิ่งถ้าคุณใช้[การรักษาความปลอดภัยระดับแถว (RLS)](../admin/service-admin-rls.md) ตามที่อธิบายไว้ก่อนหน้านี้ในบทความนี้ ไทล์แดชบอร์ดจำนวนมากเกินไปสามารถเพิ่มระยะเวลาการรีเฟรชได้อย่างมาก
- ใช้การปรับใช้เกตเวย์ข้อมูลองค์กรที่เชื่อถือได้เพื่อเชื่อมต่อชุดข้อมูลของคุณกับแหล่งข้อมูลภายในองค์กร หากคุณสังเกตเห็นความล้มเหลวในการรีเฟรชที่เกี่ยวข้องกับเกตเวย์เช่น เกตเวย์ไม่พร้อมใช้งานหรือโอเวอร์โหลด ให้ติดตามผู้ดูแลระบบเกตเวย์เพื่อเพิ่มเกตเวย์เพิ่มเติมในคลัสเตอร์ที่มีอยู่หรือปรับใช้คลัสเตอร์ใหม่
- ใช้เกตเวย์ข้อมูลแยกต่างหากสำหรับชุดข้อมูลนำเข้าและชุดข้อมูล DirectQuery/LiveConnect เพื่อให้การนำเข้าข้อมูลระหว่างการรีเฟรชตามกำหนดเวลาไม่ส่งผลกระทบต่อประสิทธิภาพการทำงานของรายงานและแดชชอร์ดที่ด้านบนของชุดข้อมูล DirectQuery/LiveConnect ซึ่งคิวรีแหล่งข้อมูลที่มีการโต้ตอบกับผู้ใช้แต่ละคน
- ตรวจสอบให้แน่ใจว่า Power BI สามารถส่งการแจ้งเตือนความล้มเหลวในการรีเฟรชไปยังกล่องจดหมายของคุณ ตัวกรองสแปมอาจบล็อกข้อความอีเมลหรือย้ายไปไว้ในโฟลเดอร์แยกต่างหากซึ่งคุณอาจไม่สังเกตเห็นทันที


## <a name="next-steps"></a>ขั้นตอนถัดไป

[การกำหนดค่าการรีเฟรชตามกำหนดการ](refresh-scheduled-refresh.md)  
[เครื่องมือสำหรับแก้ไขประเด็นปัญหาในการรีเฟรช](service-gateway-onprem-tshoot.md)  
[การแก้ไขปัญหาสถานการณ์สมมติในการรีเฟรช](refresh-troubleshooting-refresh-scenarios.md)  

มีคำถามเพิ่มเติมหรือไม่ [ลองถามชุมชน Power BI](https://community.powerbi.com/)
