---
title: เรียนรู้การเชื่อมต่อ Azure Data Lake Storage Gen2 กับ Power BI สำหรับที่เก็บกระแสข้อมูล
description: นำข้อมูลของคุณขึ้นมาทำเป็นกระแสข้อมูลด้วยตัวเองโดยใช้ Azure Data Lake Storage Gen2
author: davidiseminger
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-service
ms.topic: conceptual
ms.date: 01/22/2020
ms.author: davidi
LocalizationGroup: Data from files
ms.openlocfilehash: 8297d5e16c15baac058f82b75634eb4f31b3c630
ms.sourcegitcommit: 7aa0136f93f88516f97ddd8031ccac5d07863b92
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 05/05/2020
ms.locfileid: "80113174"
---
# <a name="connect-azure-data-lake-storage-gen2-for-dataflow-storage"></a>เชื่อมต่อ Azure Data Lake Storage Gen2 สำหรับการเก็บกระแสข้อมูล

คุณสามารถกำหนดค่าให้พื้นที่ทำงาน Power BI จัดการจัดเก็บข้อมูลของกระแสข้อมูลไว้ในบัญชี Azure Data Lake Storage รุ่น 2 ขององค์กรได้ ภายในบทความนี้จะอธิบายขั้นตอนทั่วไปที่จำเป็นต้องปฏิบัติ และให้คำแนะนำพร้อมแนวทางปฏิบัติที่ดีที่สุด มีข้อดีหลายประการสำหรับการกำหนดค่าพื้นที่ทำงานเพื่อจัดเก็บข้อกำหนดกระแสข้อมูลและไฟล์ข้อมูลใน data lake ของคุณ ดังเช่นต่อไปนี้:

* Azure Data Lake Storage Gen2 มีพื้นที่อำนวยความสะดวกอย่างกว้างขวางและอำนวยความสะดวกให้ในการจัดเก็บข้อมูล
* นักพัฒนาแผนก IT ของคุณสามารถใช้ไฟล์ข้อมูลและข้อกำหนดกระแสข้อมูลให้เกิดประโยชน์กับข้อมูลจาก Azure และบริการจากปัญญาประดิษฐ์ (AI) ตามที่สาธิตใน[ตัวอย่าง Github จากบริการข้อมูล Azure](https://aka.ms/cdmadstutorial)
* ช่วยให้นักพัฒนาในองค์กรของคุณรวบรวมกระแสข้อมูล ลงในแอปพลิเคชันภายใน, การแก้ปัญหาทางธุรกิจ, การใช้ทรัพยากรของนักพัฒนาสำหรับกระแสข้อมูลและ Azure

เพื่อใช้ Azure Data Lake Storage Gen2 กับกระแสข้อมูล คุณต้องปฏิบัติดังต่อไปนี้:

* **ผู้เช่าใน Power BI**  - บัญชีในผู้เช่า Azure Active Directory (AAD) ของคุณอย่างน้อยหนึ่งบัญชีต้องลงชื่อสมัครใช้งาน Power BI
* **บัญชีผู้ดูแลระบบส่วนกลาง**- บัญชีนี้จะต้องมีการกำหนดค่าและเชื่อมต่อกับ Power BI จึงจะสามารถเก็บข้อกำหนดกระแสข้อมูลและข้อมูลในบัญชี Azure Data Lake Storage Gen2 ของคุณได้
* **การสมัครใช้งาน Azure** -คุณต้องสมัครใช้งาน Azure ก่อนเพื่อใช้ Azure Data Lake Storage Gen2
* **กลุ่มทรัพยากร:** ใช้กลุ่มทรัพยากรที่คุณมีอยู่หรือคุณสามารถสร้างกลุ่มใหม่
* **บัญชีที่เก็บข้อมูล Azure ที่มีการเปิดใช้งานคุณลักษณะ Data Lake Storage Gen2** 

> [!TIP]
> ถ้าคุณยังไม่มีการสมัครใช้งาน Azure สร้าง[บัญชีฟรี](https://azure.microsoft.com/free/)ก่อนที่คุณจะเริ่ม

> [!WARNING]
> เมื่อมีการกำหนดค่าตำแหน่งที่เก็บกระแสข้อมูล จะไม่สามารถเปลี่ยนแปลงได้อีก ดูส่วน [ข้อควรพิจารณาและข้อจำกัด](#considerations-and-limitations) ใกล้กับจุดสิ้นสุดของบทความนี้สำหรับองค์ประกอบที่สำคัญอื่น ๆ เพื่อพิจารณา

## <a name="prepare-your-azure-data-lake-storage-gen2-for-power-bi"></a>เตรียมพร้อม Azure Data Lake Storage Gen2 ของคุณสำหรับ Power BI

คุณต้องสร้างและกำหนดค่าบัญชีเก็บข้อมูลก่อนที่คุณจะสามารถกำหนดค่า Power BI ด้วยบัญชี Azure Data Lake Storage Gen2 ได้ ลองมาดูข้อกำหนดสำหรับ Power BI:

1. คุณต้องเป็นเจ้าของบัญชีที่เก็บข้อมูล ADLS ซึ่งจะต้องได้รับมอบหมายในระดับทรัพยากร ไม่ได้รับจากระดับการสมัครสมาชิก
2. ต้องสร้างบัญชีเก็บข้อมูลในพื้นที่เดียวกันกับที่เช่า AADในฐานะผู้เช่า Power BI ของคุณ
3. ต้องสร้างบัญชีเก็บข้อมูลในภูมิภาคเดียวกันกับผู้เช่า Power BI ของคุณ เมื่อต้องการกำหนดว่าผู้เช่า Power BI ของคุณอยู่ที่ใด ให้ดูที่ [ผู้เช่า Power BI ของฉันอยู่ที่ไหน](service-admin-where-is-my-tenant-located.md)
4. บัญชีเก็บข้อมูลต้องให้ฟีเจอร์*พื้นที่เก็บชื่อตามลำดับชั้น*เปิดใช้งาน

ส่วนต่อไปนี้จะเป็นรายละเอียดขั้นตอนที่จำเป็นสำหรับการตั้งค่าบัญชี Azure Data Lake Storage Gen2 ของคุณ

### <a name="create-the-storage-account"></a>สร้างบัญชีเก็บข้อมูล Azure

ทำตามขั้นตอนในบทความการ[สร้างบัญชี Azure Data Lake Storage Gen2 storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-quickstart-create-account)

1. ให้แน่ใจว่า คุณเลือกตำแหน่งที่ตั้งเดียวกันกับผู้เช่า Power BI ของคุณ และตั้งค่าการเก็บข้อมูลของคุณเป็น**StorageV2 (วัตถุประสงค์ทั่วไป v2)**
2. ให้แน่ใจว่า คุณเปิดใช้งานฟีเจอร์พื้นที่เก็บชื่อตามลำดับชั้น
3. แนะนำว่าให้ตั้งค่าการจำลองแบบเป็น**Read-access geo-redundant storage (RA-GRS)**

### <a name="grant-permissions-to-power-bi-services"></a>ให้สิทธิ์กับบริการ Power BI

หลังจากนั้น คุณจะต้องมอบบทบาทการเข้าถึงข้อมูลและผู้อ่านบริการ Power BI เนื่องจากมีการกำหนดบทบาทมาในตัวอยู่แล้ว ดังนั้นขั้นตอนจึงไม่มีความซับซ้อน 

ทำตามขั้นตอนใน [กำหนดบทบาท RBAC ภายใน](https://docs.microsoft.com/azure/storage/common/storage-auth-aad-rbac#assign-a-built-in-rbac-role)

ในหน้าต่าง **เพิ่มการกำหนดบทบาท** เลือกบทบาท **ผู้อ่านและการเข้าถึงข้อมูล** จากนั้นใช้การค้นหาเพื่อกำหนดที่ตั้งแอปพลิเคชัน **บริการ Power BI**
ทำซ้ำขั้นตอนเดียวกันสำหรับบทบาท **เจ้าของ Blob Data Storage** และกำหนดบทบาทให้กับทั้งแอปพลิเคชัน **บริการ Power BI** และ **Power BI Premium**

> [!NOTE]
> มีเวลาอย่างน้อย 30 นาทีสำหรับสิทธิ์ในการเผยแพร่ไปยัง Power BI จากพอร์ทัล ทุกครั้งที่คุณเปลี่ยนสิทธิ์ในพอร์ทัล จะมีเวลา 30 นาทีสำหรับสิทธิ์เหล่านั้นเพื่อให้ปรากฏใน Power BI 

## <a name="connect-your-azure-data-lake-storage-gen2-to-power-bi"></a>เชื่อมต่อ Azure Data Lake Storage Gen2 เข้ากับ Power BI ของคุณ

เมื่อคุณได้ตั้งค่าบัญชี Azure Data Lake Storage Gen2 ของคุณในพอร์ทัล Azure แล้ว คุณสามารถเชื่อมต่อบัญชีเข้ากับ Power BI ใน**พอร์ทัลผู้ดูแลระบบ Power BI**ได้ คุณยังสามารถจัดการที่เก็บกระแสข้อมูล Power BI ในส่วนของการตั้งค่า**ที่เก็บกระแสข้อมูล**ของพอร์ทัลผู้ดูแลระบบ Power BI สำหรับคำแนะนำอย่างละเอียดในการเปิดใช้งานเบื้องต้น ให้ดูที่[วิธีการเข้าถึงพอร์ทัลผู้ดูแล](service-admin-portal.md)

คุณสามารถเชื่อมต่อบัญชี **Azure Data Lake Storage Gen2** ของคุณตามขั้นตอนดังต่อไปนี้:

1. นำทางไปยังแท็บ**การตั้งค่ากระแสข้อมูล**ของ**พอร์ทัลผู้ดูแลระบบ Power BI**

    ![พอร์ทัลผู้ดูแลระบบของ power BI](media/service-dataflows-connect-azure-data-lake-storage-gen2/dataflows-connect-08b.png) 

2. เลือกปุ่ม **เชื่อมต่อ Azure Data Lake Storage Gen2 ของคุณ** หน้าต่างต่อไปนี้จะปรากฏขึ้น

    ![Azure Data Lake Storage Gen2](media/service-dataflows-connect-azure-data-lake-storage-gen2/dataflows-connect-adlsg2_09.jpg) 

3. ใส่ข้อมูล**ID การสมัครใช้งาน**ของบัญชีเก็บข้อมูล
4. ตั้ง**ชื่อกลุ่มทรัพยากร**ที่บัญชีเก็บข้อมูลถูกสร้างขึ้น
5. ตั้ง **ชื่อบัญชีที่เก็บข้อมูล**
6. เลือก **เชื่อมต่อ**

เมื่อดำเนินขั้นตอนเหล่านั้นจะเสร็จสมบูรณ์แล้ว บัญชี Azure Data Lake Storage Gen2 ของคุณจะถูกเชื่อมต่อกับ Power BI 

> [!NOTE]
> หากต้องการกำหนดค่าการเชื่อมต่อกับ Azure Data Lake Storage รุ่น2 ในพอร์ทัลผู้ดูแลระบบ Power BI คุณต้องมีสิทธิ์ผู้ดูแลระบบส่วนกลาง อย่างไรก็ตาม ผู้ดูแลระบบส่วนกลางจะไม่สามารถเชื่อมต่อกับที่เก็บข้อมูลภายนอกในพอร์ทัลผู้ดูแลระบบได้  

ขั้นตอนถัดไปคุณต้องอนุญาตให้บุคลากรในองค์กรสามารถกำหนดค่าในพื้นที่ทำงานได้เพื่อที่จะให้พวกเขาสามารถใช้บัญชีที่เก็บข้อมูลสำหรับข้อกำหนดกระแสข้อมูลและที่เก็บข้อมูล ลองทำแบบนั้นดูในส่วนถัดไป 


## <a name="allow-admins-to-assign-workspaces"></a>อนุญาตให้ผู้ดูแลระบบเป็นผู้กำหนดพื้นที่ทำงาน

ตามค่าเริ่มต้น ข้อกำหนดกระแสข้อมูลและไฟล์ข้อมูลจะถูกเก็บอยู่ในที่เก็บข้อมูลซึ่งจัดหาโดย Power BI เมื่อต้องการเข้าถึงไฟล์กระแสข้อมูลในบัญชีที่เก็บข้อมูลของคุณ ผู้ดูแลพื้นที่ทำงานต้องกำหนดค่าพื้นที่ทำงานให้สามารถอนุญาตเก็บกระแสข้อมูลและมอบหมายงานในบัญชีเก็บข้อมูลใหม่ ก่อนที่ผู้ดูแลพื้นที่ทำงานจะสามารถกำหนดค่าในการตั้งค่าพื้นที่เก็บกระแสข้อมูล ผู้ดูแลคนนั้น ๆ จะต้องได้รับอนุญาตจากที่เก็บข้อมูลตามการมอบหมายใน **พอร์ทัลผู้ดูแลระบบ Power BI**.

เมื่อต้องให้สิทธิ์อนุญาตจากที่เก็บข้อมูลตามการมอบหมาย ให้ไปที่**การตั้งค่ากระแสข้อมูล**ในแท็บการ**พอร์ทัลผู้ดูแลระบบ Power BI** จะมีปุ่มตัวเลือกว่า*อนุญาตให้ผู้ดูแลพื้นที่ทำงานเป็นผู้กำหนดพื้นที่ทำงานให้กับบัญชีที่เก็บข้อมูลนี้*ซึ่งต้องตั้งค่าเป็น**อนุญาต** เมื่อคุณเปิดใช้งานแถบเลื่อน ให้กดปุ่ม**นำไปใช้**เพื่อให้เปลี่ยนแปลงมีผลบังคับใช้ 

![อนุญาตให้ผู้ดูแลระบบเป็นผู้กำหนดพื้นที่ทำงาน](media/service-dataflows-connect-azure-data-lake-storage-gen2/dataflows-connect-adlsg2_10.jpg) 

เท่านี้ก็เรียบร้อย ตอนนี้ผู้ดูแลพื้นที่ทำงาน Power BI สามารถกำหนดให้เวิร์กโฟลว์ไปยังไฟล์ระบบที่คุณสร้างขึ้นได้


## <a name="considerations-and-limitations"></a>ข้อควรพิจารณาและข้อจำกัด

ฟีเจอร์นี้เป็นเพียงฟีเจอร์ตัวอย่าง ลักษณะการทำงานของฟีเจอร์อาจมีการเปลี่ยนแปลงในวันที่มีการปล่อยสู่สาธารณะ มีข้อควรพิจารณาและข้อจำกัดสองสามข้อที่ควรทราบเมื่อที่เก็บกระแสข้อมูลของคุณ:

* เมื่อมีการกำหนดค่าตำแหน่งที่เก็บกระแสข้อมูล จะไม่สามารถเปลี่ยนแปลงได้อีก
* เฉพาะเจ้าของกระแสข้อมูลที่ถูกเก็บไว้ใน Azure Data Lake Storage Gen2 เท่านั้นที่สามารถเข้าถึงข้อมูลที่เป็นค่าเริ่มต้นได้ หากคุณต้องการให้ผู้ใช้อื่นสามารถเข้าถึงกระแสข้อมูลที่ถูกเก็บไว้ใน Azure คุณต้องเพิ่มพวกเขาเหล่านั้นลงในกระแสข้อมูลโฟลเดอร์ CDM ก่อน 
* การสร้างกระแสข้อมูลพร้อมเอนทิตีที่มีการเชื่อมโยงสามารถทำได้เฉพาะเมื่อกระแสข้อมูลนั้นถูกเก็บไว้ในบัญชีเก็บข้อมูลเดียวกัน
* แหล่งข้อมูลภายในองค์กรที่แชร์ความจุมาจาก Power BI ไม่สามารถเข้ากันได้กับกระแสข้อมูลที่ถูกเก็บไว้ใน data lake ขององค์กรคุณ
* จะไม่มีการลบสแนปช็อตโดยอัตโนมัติบน ADLS Gen 2 ถ้าคุณต้องการเพิ่มพื้นที่ว่าง คุณสามารถสร้างฟังก์ชัน Azure เพื่อล้างสแนปช็อตเก่าเป็นระยะ ๆ ได้

และยังมีปัญหาอีกสองสามกรณีตามที่ได้อธิบายไว้ในส่วนนี้

ลูกค้า Power BI Desktop ไม่สามารถเข้าถึงกระแสข้อมูลที่เก็บไว้ในบัญชี **Azure Data Lake Storage Gen2** ได้จนกว่าพวกเขาจะเป็นเจ้าของกระแสข้อมูลเองหรือได้รับอนุญาตให้เข้าถึงโฟลเดอร์ CDM ใน data lake ได้ ต่อไปนี้คือสถานการณ์สมมติ:

1. แอนนาสร้างพื้นที่ทำงานใหม่และกำหนดค่าเพื่อจัดเก็บกระแสข้อมูลใน data lake ขององค์กร 
2. เบน (สมาชิกคนหนึ่งของพื้นที่ทำงานที่แอนนาสร้าง) ต้องการใช้ Power BI Desktop และตัวเชื่อมต่อกระแสข้อมูลเพื่อรับข้อมูลจากกระแสข้อมูลที่ แอนนาสร้าง
3. เบนเจอข้อผิดพลาดคล้ายกันกับรูปดังต่อไปนี้เนื่องจากเบนไม่ได้รับอนุญาตไปยังโฟลเดอร์ CDM ของกระแสข้อมูลใน lake

คำถามและคำตอบโดยทั่วไปมีดังนี้:

**คำถาม:** ถ้าก่อนหน้านี้ฉันเคยสร้างกระแสข้อมูลในพื้นที่ทำงาน และต้องการเปลี่ยนตำแหน่งที่เก็บข้อมูล ฉันจะต้องทำอย่างไร?

**คำตอบ:** คุณไม่สามารถเปลี่ยนตำแหน่งที่เก็บของกระแสข้อมูลได้ หลังจากที่ถูกสร้างขึ้น 

**คำถาม:** แล้วฉันจะสามารถเปลี่ยนตำแหน่งที่เก็บกระแสข้อมูลได้เมื่อไหร่?

**คำตอบ:** การเปลี่ยนตำแหน่งที่เก็บกระแสข้อมูลของพื้นที่ทำงานสามารถทำได้เฉพาะตอนนี้ไม่มีกระแสข้อมูลอยู่ในพื้นที่ทำงานนั้น ๆ แล้ว


## <a name="next-steps"></a>ขั้นตอนถัดไป

บทความนี้มีคำแนะนำเกี่ยวกับวิธีการเชื่อมต่อ Azure Data Lake Gen2 สำหรับที่เก็บกระแสข้อมูล สำหรับรายละเอียดเพิ่มเติม ดูที่บทความดังต่อไปนี้:

สำหรับข้อมูลเพิ่มเติมเกี่ยวกับกระแสข้อมูล, CDM, และ Azure Data Lake Storage Gen2 ดูบทความต่อไปนี้:

* [ การรวมกระแสข้อมูลและ Azure Data Lake (ตัวอย่าง)](service-dataflows-azure-data-lake-integration.md)
* [กำหนดการตั้งค่ากระแสข้อมูลพื้นที่ทำงาน (ตัวอย่าง)](service-dataflows-configure-workspace-storage-settings.md)
* [เพิ่มโฟลเดอร์ CDM ไปยัง Power BI เป็นกระแสข้อมูล (ตัวอย่าง)](service-dataflows-add-cdm-folder.md)

สำหรับข้อมูลเกี่ยวกับกระแสข้อมูลโดยรวม ให้อ่านบทความเหล่านี้:

* [การสร้างและใช้กระแสข้อมูลใน Power BI](service-dataflows-create-use.md)
* [การใช้เอนทิตีที่คำนวณใน Power BI Premium](service-dataflows-computed-entities-premium.md)
* [การใช้กระแสข้อมูลกับแหล่งข้อมูลภายในองค์กร](service-dataflows-on-premises-gateways.md)
* [แหล่งข้อมูลของนักพัฒนาสำหรับกระแสข้อมูล Power BI](service-dataflows-developer-resources.md)

สำหรับข้อมูลเพิ่มเติมเกี่ยวกับพื้นที่เก็บข้อมูล Azure คุณสามารถอ่านบทความเหล่านี้:
* [คู่มือความปลอดภัยการเก็บข้อมูลของ Azure](https://docs.microsoft.com/azure/storage/common/storage-security-guide)

สำหรับข้อมูลเพิ่มเติมเกี่ยวกับ Common Data Model สามารถดูได้ในบทความภาพรวม:
* [Common Data Model - ภาพรวม](https://docs.microsoft.com/powerapps/common-data-model/overview)
* [โฟลเดอร์ CDM ](https://go.microsoft.com/fwlink/?linkid=2045304)
* [นิยามของ ไฟล์รูปแบบ CDM](https://go.microsoft.com/fwlink/?linkid=2045521)

และคุณสามารถลอง[ถามคำถามในชุมชนของ Power BI](https://community.powerbi.com/) ได้เสมอ
