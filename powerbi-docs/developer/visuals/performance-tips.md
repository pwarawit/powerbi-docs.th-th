---
title: เคล็ดลับประสิทธิภาพการทำงาน
description: วิธีการสร้างวิชวล Power BI ประสิทธิภาพสูง
author: KesemSharabi
ms.author: kesharab
ms.reviewer: sranins
ms.service: powerbi
ms.subservice: powerbi-custom-visuals
ms.topic: how-to
ms.date: 04/20/2020
ms.openlocfilehash: 7ebc02b2c459517957425e78438e12e89dc2e1bb
ms.sourcegitcommit: 7aa0136f93f88516f97ddd8031ccac5d07863b92
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 05/05/2020
ms.locfileid: "82196571"
---
# <a name="how-to-build-a-high-performance-power-bi-visual"></a>วิธีการสร้างวิชวล Power BI ประสิทธิภาพสูง
บทความนี้จะครอบคลุมเทคนิคเกี่ยวกับวิธีที่นักพัฒนาสามารถทำงานได้อย่างมีประสิทธิภาพสูงเมื่อแสดงวิชวล 

ไม่มีใครต้องการให้วิชวลใช้เวลาในการแสดงผลและการบีบลดประสิทธิภาพลงทุกครั้งที่คุณสามารถออกจากรหัสได้กลายเป็นสิ่งสำคัญเมื่อการแสดงผล 

> [!NOTE]
> ในขณะที่เรายังคงพัฒนาและปรับปรุงแพลตฟอร์ม จะมีการเผยแพร่เวอร์ชันใหม่ของ API อย่างต่อเนื่อง เพื่อให้ได้ประโยชน์สูงสุดจากแพลตฟอร์มและชุดคุณลักษณะของวิชวล Power BI แนะนำให้คุณอัปเดตเป็นเวอร์ชันล่าสุดอยู่เสมอ
>
> นับตั้งแต่ **เวอร์ชัน 2.1** ล่าสุด เวลาการโหลดวิชวล Power BI ได้รับการปรับปรุงโดยเฉลี่ย 20%

## <a name="power-bi-visual-performance-tips"></a>เคล็ดลับประสิทธิภาพการทำงานของวิชวล Power BI
ต่อไปนี้เป็นคำแนะนำเกี่ยวกับวิธีการทำให้วิชวลมีประสิทธิภาพที่ดีที่สุด 

### <a name="use-user-timing-api"></a>ใช้ API ไทม์มิ่งของผู้ใช้
การใช้ **API ไทม์มิ่งของผู้ใช้** ในการวัดประสิทธิภาพ JavaScript ของแอปสามารถช่วยให้คุณตัดสินใจได้ว่าส่วนใดของสคริปต์ที่จำเป็นต้องปรับให้เหมาะสม

สำหรับข้อมูลเพิ่มเติม ให้ดู [API ไทม์มิ่งของผู้ใช้](https://msdn.microsoft.com/library/hh772738(v=vs.85).aspx)

### <a name="review-animation-loops"></a>ตรวจสอบการวนรอบของภาพเคลื่อนไหว
การวนรอบภาพเคลื่อนไหวจะวาดองค์ประกอบที่ไม่เปลี่ยนแปลงใหม่หรือไม่ 

 - ปัญหา: การดำเนินการดังกล่าวจะทำให้เสียเวลาในการวาดองค์ประกอบที่ไม่มีการเปลี่ยนแปลงจากเฟรมต่อเฟรม

 - วิธีการแก้ไข: ปรับปรุงเฟรมที่เลือก 
 
เมื่อถึงเวลาที่จะเคลื่อนไหวการแสดงภาพแบบคงที่ การแสดงภาพแบบคงที่จะพยายามรวมรหัสการวาดเป็นฟังก์ชันการอัปเดตเดียว และใช้งานซ้ำได้ด้วยข้อมูลใหม่สำหรับการทำซ้ำแต่ละครั้งของการวนรอบของภาพเคลื่อนไหว

โปรดพิจารณารูปแบบการอัปเดตดังต่อไปนี้ ใช้วิธีการสร้างวิชวลเพื่อวาดทุกอย่างแบบคงที่ จากนั้นฟังก์ชันอัปเดตจะต้องวาดเฉพาะองค์ประกอบการแสดงภาพที่เปลี่ยนแปลงเท่านั้น 

   > [!TIP]
   > การวนรอบของภาพเคลื่อนไหวที่ไม่มีประสิทธิภาพจะพบได้ทั่วไปในแกนและคำอธิบายแผนภูมิ

### <a name="cache-dom-nodes"></a>โหนด DOM แคช 
เมื่อมีการเรียกใช้โหนดหรือรายการของโหนดจาก DOM คุณจะต้องคิดว่าคุณสามารถนำมาใช้ใหม่ได้ในการคำนวณภายหลัง (บางครั้งแม้แต่การทำซ้ำในการวนรอบถัดไป) ตราบใดที่คุณไม่จำเป็นต้องเพิ่มหรือลบโหนดเพิ่มเติมในพื้นที่ที่เกี่ยวข้อง การแคชโหนดเหล่านั้นสามารถปรับปรุงประสิทธิภาพโดยรวมของแอปพลิเคชันของคุณได้

หากต้องการตรวจสอบให้แน่ใจว่ารหัสของคุณรวดเร็วและไม่ทำให้เบราว์เซอร์ช้าลง ให้รักษาการเข้าถึง DOM ไว้ที่ระดับต่ำสุด 

- ก่อน: 

   ```javascript
   public update(options: VisualUpdateOptions) { 
       let axis = $(".axis"); 
   }
   ```

- หลัง: 

   ```javascript
   public constructor(options: VisualConstructorOptions) { 
       this.$root = $(options.element); 
       this.xAxis = this.$root.find(".xAxis"); 
   } 
 
   public update(options: VisualUpdateOptions) { 
       let axis = this.axis; 
   }
   ```

### <a name="avoid-dom-manipulation"></a>หลีกเลี่ยงการจัดการ DOM 
จำกัดการจัดการ DOM ให้มากที่สุดเท่าที่เป็นไปได้  การแทรกการดำเนินการเช่น `prepend()`, `append()`และ `after()` ใช้เวลานาน และไม่ควรใช้เว้นแต่ว่าจำเป็น

ตัวอย่างเช่น:

  ```javascript
  for (let i=0; i<1000; i++) { 
      $('#list').append('<li>'+i+'</li>');
  }
  ```

ตัวอย่างข้างต้นอาจถูกทำให้เร็วขึ้นโดยใช้ `html()` และสร้างรายการล่วงหน้า: 

  ```javascript
  let list = ''; 
  for (let i=0; i<1000; i++) { 
      list += '<li>'+i+'</li>'; 
  } 

  $('#list').html(list); 
  ```

### <a name="reconsider-jquery"></a>พิจารณา JQuery อีกครั้ง

การจำกัดเฟรมเวิร์ก JS ของคุณและการใช้ JS แบบดั้งเดิมเมื่อใดก็ตามที่เป็นไปได้สามารถเพิ่มแบนด์วิดท์ที่มีอยู่ และลดค่าใช้จ่ายในการประมวลผลของคุณได้ นอกจากนี้ยังสามารถจำกัดปัญหาความเข้ากันได้กับเบราว์เซอร์รุ่นเก่าได้ 

สำหรับข้อมูลเพิ่มเติม โปรดดู [youmightnotneedjquery.com](http://youmightnotneedjquery.com/) สำหรับตัวอย่างทางเลือกในฟังก์ชันเช่น `show`, `hide`, `addClass` ของ JQuery และอื่นๆ อีกมากมาย  

### <a name="use-canvas-or-webgl"></a>ใช้พื้นที่ทำงานหรือ WebGL 
สำหรับการใช้ภาพเคลื่อนไหวซ้ำ ให้พิจารณาการใช้ **พื้นที่ทำงาน**หรือ **WebGL** แทนที่จะเป็น SVG ซึ่งแตกต่างจาก SVG เพราะว่าประสิทธิภาพการทำงานของตัวเลือกเหล่านี้จะถูกกำหนดโดยขนาดแทนที่จะเป็นเนื้อหา 

คุณสามารถอ่านเพิ่มเติมเกี่ยวกับความแตกต่างใน [SVG กับ พื้นที่ทำงาน: วิธีการเลือก](https://msdn.microsoft.com/library/gg193983(v=vs.85).aspx) 

### <a name="use-requestanimationframe-instead-of-settimeout"></a>ใช้ requestAnimationFrame แทน setTimeout 
ถ้าคุณใช้ [requestAnimationFrame](https://www.w3.org/TR/animation-timing/) เพื่ออัปเดตภาพเคลื่อนไหวบนหน้าจอ ฟังก์ชันภาพเคลื่อนไหวของคุณจะเรียกว่า **ก่อน** เบราว์เซอร์จะเรียกว่าการทำสีใหม่อีกอย่าง

สำหรับข้อมูลเพิ่มเติม โปรดด[ูตัวอย่าง](https://testdrive-archive.azurewebsites.net/Graphics/RequestAnimationFrame/Default.html)นี้เกี่ยวกับภาพเคลื่อนไหวที่ราบรื่นโดยใช้ `requestAnimationFrame`

## <a name="next-steps"></a>ขั้นตอนถัดไป

เรียนรู้เพิ่มเติมเกี่ยวกับเทคนิคการเพิ่มประสิทธิภาพใน[คำแนะนำการปรับให้เหมาะสมสำหรับ Power BI](/power-bi/guidance/power-bi-optimization)
